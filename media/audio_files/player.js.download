function Animator(t){this.setOptions(t);var e=this;this.timerDelegate=function(){e.onTimerEvent()},this.subjects=[],this.subjectScopes=[],this.state=this.target=0,this.lastTime=null}function NumericalStyleSubject(t,e,a,n,o){this.els=Animator.makeArray(t),"opacity"==e&&window.ActiveXObject?this.property="filter":this.property=Animator.camelize(e),this.from=parseFloat(a),this.to=parseFloat(n),this.units=null!=o?o:"px"}function ColorStyleSubject(t,e,a,n){this.els=Animator.makeArray(t),this.property=Animator.camelize(e),this.to=this.expandColor(n),this.from=this.expandColor(a),this.origFrom=a,this.origTo=n}function DiscreteStyleSubject(t,e,a,n,o){this.els=Animator.makeArray(t),this.property=Animator.camelize(e),this.from=a,this.to=n,this.threshold=o||.5}function CSSStyleSubject(t,e,a){if(t=Animator.makeArray(t),this.subjects=[],0!=t.length){var n,o;if(a){var i=this.parseStyle(e,t[0]);e=this.parseStyle(a,t[0])}else for(n in i={},e=this.parseStyle(e,t[0]))i[n]=CSSStyleSubject.getStyle(t[0],n);for(n in i)i[n]==e[n]&&(delete i[n],delete e[n]);for(n in i){var s=String(i[n]),r=String(e[n]);if(null!=e[n]){if(o=ColorStyleSubject.parseColor(s)){var l=ColorStyleSubject.parseColor(r);a=ColorStyleSubject}else if(s.match(CSSStyleSubject.numericalRe)&&r.match(CSSStyleSubject.numericalRe)){o=parseFloat(s),l=parseFloat(r),a=NumericalStyleSubject;var u=CSSStyleSubject.numericalRe.exec(s);r=CSSStyleSubject.numericalRe.exec(r),u=null!=u[1]?u[1]:null!=r[1]?r[1]:r}else{if(!s.match(CSSStyleSubject.discreteRe)||!r.match(CSSStyleSubject.discreteRe)){window.DEBUG&&alert("Unrecognised format for value of "+n+": '"+i[n]+"'");continue}o=s,l=r,a=DiscreteStyleSubject,u=0}this.subjects[this.subjects.length]=new a(t,n,o,l,u)}else window.DEBUG&&alert("No to style provided for '"+n+'"')}}}function AnimatorChain(t,e){this.animators=t,this.setOptions(e);for(var a=0;a<this.animators.length;a++)this.listenTo(this.animators[a]);this.forwards=!1,this.current=0}function Accordion(t){var e;this.setOptions(t),t=this.options.initialSection,this.options.rememberance&&(e=document.location.hash.substring(1)),this.rememberanceTexts=[],this.ans=[];for(var a=this,n=0;n<this.options.sections.length;n++){var o=this.options.sections[n],i=new Animator(this.options.animatorOptions);i.addSubject(new NumericalStyleSubject(o,this.options.property,this.options.from+this.options.shift*n,this.options.to+this.options.shift*n,this.options.units)),i.jumpTo(0),(o=this.options.getActivator(o)).index=n,o.onclick=function(){a.show(this.index)},this.ans[this.ans.length]=i,this.rememberanceTexts[n]=o.innerHTML.replace(/\s/g,""),this.rememberanceTexts[n]===e&&(t=n)}this.show(t)}var threeSixtyPlayer;!function(t,e){function a(a,n){function o(t){return f.preferFlash&&c&&!f.ignoreFlash&&f.flash[t]!==e&&f.flash[t]}function i(t){return function(e){var a,n=this._s;return n&&n._a?a=t.call(this,e):(n&&n.id?f._wD(n.id+": Ignoring "+e.type):f._wD("HTML5::Ignoring "+e.type),a=null),a}}this.setupOptions={url:a||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,ignoreMobileRestrictions:!1,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onerror:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,playbackRate:1,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={onfailure:null,isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1},flac:{type:["audio/flac"],required:!1}},this.movieID="sm2-container",this.id=n||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20170601",this.altURL=this.movieURL=this.version=null,this.enabled=this.swfLoaded=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.didFlashBlock=this.muted=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.ignoreFlash=this.html5Only=!1;var s,r,l,u,d,c,h,f=this,p=null,m=null,g=navigator.userAgent,y=t.location.href.toString(),_=document,v=[],w=!0,b=!1,S=!1,M=!1,D=!1,T=!1,O=0,C=["log","info","warn","error"],L=null,P=null,I=!1,E=!1,A=0,F=null,k=[],N=null,x=Array.prototype.slice,R=!1,H=0,U=g.match(/(ipad|iphone|ipod)/i),B=g.match(/android/i),j=g.match(/msie|trident/i),V=g.match(/webkit/i),W=g.match(/safari/i)&&!g.match(/chrome/i),q=g.match(/opera/i),z=g.match(/(mobile|pre\/|xoom)/i)||U||B,X=!y.match(/usehtml5audio/i)&&!y.match(/sm2-ignorebadua/i)&&W&&!g.match(/silk/i)&&g.match(/OS\sX\s10_6_([3-7])/i),Q=t.console!==e&&console.log!==e,Y=_.hasFocus!==e?_.hasFocus():null,$=W&&(_.hasFocus===e||!_.hasFocus()),G=!$,K=/(mp3|mp4|mpa|m4a|m4b)/i,J=_.location?_.location.protocol.match(/http/i):null,Z=J?"":"//",tt=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4|m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,et="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),at=new RegExp("\\.("+et.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!J;var nt={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},ot=[null,"MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];try{var it=Audio!==e&&(q&&opera!==e&&10>opera.version()?new Audio(null):new Audio).canPlayType!==e}catch(t){it=!1}this.hasHTML5=it,this.setup=function(t){var a=!f.url;return t!==e&&M&&N&&f.ok()&&(t.flashVersion!==e||t.url!==e||t.html5Test!==e)&&St(vt("setupLate")),ht(t),R||(z?f.setupOptions.ignoreMobileRestrictions&&!f.setupOptions.forceUseGlobalHTML5Audio||(k.push(_t.globalHTML5),R=!0):f.setupOptions.forceUseGlobalHTML5Audio&&(k.push(_t.globalHTML5),R=!0)),!h&&z&&(f.setupOptions.ignoreMobileRestrictions?k.push(_t.ignoreMobile):(f.setupOptions.useHTML5Audio&&!f.setupOptions.preferFlash||f._wD(_t.mobileUA),f.setupOptions.useHTML5Audio=!0,f.setupOptions.preferFlash=!1,U?f.ignoreFlash=!0:(B&&!g.match(/android\s2\.3/i)||!B)&&(f._wD(_t.globalHTML5),R=!0))),t&&(a&&r&&t.url!==e&&f.beginDelayedInit(),r||t.url===e||"complete"!==_.readyState||setTimeout(te,1)),h=!0,f},this.supported=this.ok=function(){return N?M&&!D:f.useHTML5Audio&&f.hasHTML5},this.getMovie=function(e){return lt(e)||_[e]||t[e]},this.createSound=function(t,a){function n(){return o=wt(o),f.sounds[o.id]=new st(o),f.soundIDs.push(o.id),f.sounds[o.id]}var o,i=null;if(i="soundManager.createSound(): "+vt(M?"notOK":"notReady"),!M||!f.ok())return St(i),!1;if(a!==e&&(t={id:t,url:a}),(o=ut(t)).url=Ut(o.url),o.id===e&&(o.id=f.setupOptions.idPrefix+H++),o.id.toString().charAt(0).match(/^[0-9]$/)&&f._wD("soundManager.createSound(): "+vt("badID",o.id),2),f._wD("soundManager.createSound(): "+o.id+(o.url?" ("+o.url+")":""),1),Lt(o.id,!0))return f._wD("soundManager.createSound(): "+o.id+" exists",1),f.sounds[o.id];if(mt(o))i=n(),f.html5Only||f._wD(o.id+": Using HTML5"),i._setup_html5(o);else{if(f.html5Only)return f._wD(o.id+": No HTML5 support for this sound, and no Flash. Exiting."),n();if(f.html5.usingFlash&&o.url&&o.url.match(/data:/i))return f._wD(o.id+": data: URIs not supported via Flash. Exiting."),n();8<s&&(null===o.isMovieStar&&(o.isMovieStar=!!(o.serverURL||o.type&&o.type.match(tt)||o.url&&o.url.match(at))),o.isMovieStar&&(f._wD("soundManager.createSound(): using MovieStar handling"),1<o.loops&&Pt("noNSLoop"))),o=bt(o,"soundManager.createSound(): "),i=n(),8===s?m._createSound(o.id,o.loops||1,o.usePolicyFile):(m._createSound(o.id,o.url,o.usePeakData,o.useWaveformData,o.useEQData,o.isMovieStar,!!o.isMovieStar&&o.bufferTime,o.loops||1,o.serverURL,o.duration||null,o.autoPlay,!0,o.autoLoad,o.usePolicyFile),o.serverURL||(i.connected=!0,o.onconnect&&o.onconnect.apply(i))),o.serverURL||!o.autoLoad&&!o.autoPlay||i.load(o)}return!o.serverURL&&o.autoPlay&&i.play(),i},this.destroySound=function(t,e){if(!Lt(t))return!1;var a,n=f.sounds[t];for(n.stop(),n._iO={},n.unload(),a=0;a<f.soundIDs.length;a++)if(f.soundIDs[a]===t){f.soundIDs.splice(a,1);break}return e||n.destruct(!0),delete f.sounds[t],!0},this.load=function(t,e){return!!Lt(t)&&f.sounds[t].load(e)},this.unload=function(t){return!!Lt(t)&&f.sounds[t].unload()},this.onposition=this.onPosition=function(t,e,a,n){return!!Lt(t)&&f.sounds[t].onposition(e,a,n)},this.clearOnPosition=function(t,e,a){return!!Lt(t)&&f.sounds[t].clearOnPosition(e,a)},this.start=this.play=function(t,e){var a=null,n=e&&!(e instanceof Object);if(!M||!f.ok())return St("soundManager.play(): "+vt(M?"notOK":"notReady")),!1;if(Lt(t,n))n&&(e={url:e});else{if(!n)return!1;n&&(e={url:e}),e&&e.url&&(f._wD('soundManager.play(): Attempting to create "'+t+'"',1),e.id=t,a=f.createSound(e).play())}return null===a&&(a=f.sounds[t].play(e)),a},this.setPlaybackRate=function(t,e,a){return!!Lt(t)&&f.sounds[t].setPlaybackRate(e,a)},this.setPosition=function(t,e){return!!Lt(t)&&f.sounds[t].setPosition(e)},this.stop=function(t){return!!Lt(t)&&(f._wD("soundManager.stop("+t+")",1),f.sounds[t].stop())},this.stopAll=function(){for(var t in f._wD("soundManager.stopAll()",1),f.sounds)f.sounds.hasOwnProperty(t)&&f.sounds[t].stop()},this.pause=function(t){return!!Lt(t)&&f.sounds[t].pause()},this.pauseAll=function(){var t;for(t=f.soundIDs.length-1;0<=t;t--)f.sounds[f.soundIDs[t]].pause()},this.resume=function(t){return!!Lt(t)&&f.sounds[t].resume()},this.resumeAll=function(){var t;for(t=f.soundIDs.length-1;0<=t;t--)f.sounds[f.soundIDs[t]].resume()},this.togglePause=function(t){return!!Lt(t)&&f.sounds[t].togglePause()},this.setPan=function(t,e){return!!Lt(t)&&f.sounds[t].setPan(e)},this.setVolume=function(t,a){var n;if(t!==e&&!isNaN(t)&&a===e){var o=0;for(n=f.soundIDs.length;o<n;o++)f.sounds[f.soundIDs[o]].setVolume(t);return!1}return!!Lt(t)&&f.sounds[t].setVolume(a)},this.mute=function(t){if(t instanceof String&&(t=null),t)return!!Lt(t)&&(f._wD('soundManager.mute(): Muting "'+t+'"'),f.sounds[t].mute());for(f._wD("soundManager.mute(): Muting all sounds"),t=f.soundIDs.length-1;0<=t;t--)f.sounds[f.soundIDs[t]].mute();return f.muted=!0,!0},this.muteAll=function(){f.mute()},this.unmute=function(t){if(t instanceof String&&(t=null),t)return!!Lt(t)&&(f._wD('soundManager.unmute(): Unmuting "'+t+'"'),f.sounds[t].unmute());for(f._wD("soundManager.unmute(): Unmuting all sounds"),t=f.soundIDs.length-1;0<=t;t--)f.sounds[f.soundIDs[t]].unmute();return f.muted=!1,!0},this.unmuteAll=function(){f.unmute()},this.toggleMute=function(t){return!!Lt(t)&&f.sounds[t].toggleMute()},this.getMemoryUse=function(){var t=0;return m&&8!==s&&(t=parseInt(m._getMemoryUse(),10)),t},this.disable=function(a){var n;if(a===e&&(a=!1),D)return!1;for(D=!0,Pt("shutdown",1),n=f.soundIDs.length-1;0<=n;n--)Dt(f.sounds[f.soundIDs[n]]);return Dt(f),Jt(a),ft.remove(t,"load",xt),!0},this.canPlayMIME=function(t){var e;return f.hasHTML5&&(e=yt({type:t})),!e&&N&&(e=t&&f.ok()?!!(8<s&&t.match(tt)||t.match(f.mimePattern)):null),e},this.canPlayURL=function(t){var e;return f.hasHTML5&&(e=yt({url:t})),!e&&N&&(e=t&&f.ok()?!!t.match(f.filePattern):null),e},this.canPlayLink=function(t){return!(t.type===e||!t.type||!f.canPlayMIME(t.type))||f.canPlayURL(t.href)},this.getSoundById=function(t,e){if(!t)return null;var a=f.sounds[t];return a||e||f._wD('soundManager.getSoundById(): Sound "'+t+'" not found.',2),a},this.onready=function(e,a){if("function"!=typeof e)throw vt("needFunction","onready");return M&&f._wD(vt("queue","onready")),a||(a=t),kt("onready",e,a),Nt(),!0},this.ontimeout=function(e,a){if("function"!=typeof e)throw vt("needFunction","ontimeout");return M&&f._wD(vt("queue","ontimeout")),a||(a=t),kt("ontimeout",e,a),Nt({type:"ontimeout"}),!0},this._writeDebug=function(t,a){var n,o;return!(!f.setupOptions.debugMode||!(Q&&f.useConsole&&(a&&"object"==typeof a?console.log(t,a):C[a]!==e?console[C[a]](t):console.log(t),f.consoleOnly))&&(!(n=lt("soundmanager-debug"))||(o=_.createElement("div"),0==++O%2&&(o.className="sm2-alt"),a=a===e?0:parseInt(a,10),o.appendChild(_.createTextNode(t)),a&&(2<=a&&(o.style.fontWeight="bold"),3===a&&(o.style.color="#ff3333")),n.insertBefore(o,n.firstChild),0)))},-1!==y.indexOf("sm2-debug=alert")&&(this._writeDebug=function(e){t.alert(e)}),this._wD=this._writeDebug,this._debug=function(){var t;Pt("currentObj",1);var e=0;for(t=f.soundIDs.length;e<t;e++)f.sounds[f.soundIDs[e]]._debug()},this.reboot=function(e,a){var n,o;for(f.soundIDs.length&&f._wD("Destroying "+f.soundIDs.length+" SMSound object"+(1!==f.soundIDs.length?"s":"")+"..."),n=f.soundIDs.length-1;0<=n;n--)f.sounds[f.soundIDs[n]].destruct();if(m)try{j&&(P=m.innerHTML),L=m.parentNode.removeChild(m)}catch(t){Pt("badRemove",2)}if(P=L=N=m=null,f.enabled=r=M=I=E=b=S=D=R=f.swfLoaded=!1,f.soundIDs=[],f.sounds={},H=0,h=!1,e)v=[];else for(n in v)if(v.hasOwnProperty(n)){var i=0;for(o=v[n].length;i<o;i++)v[n][i].fired=!1}return a||f._wD("soundManager: Rebooting..."),f.html5={usingFlash:null},f.flash={},f.html5Only=!1,f.ignoreFlash=!1,t.setTimeout(function(){a||f.beginDelayedInit()},20),f},this.reset=function(){return Pt("reset"),f.reboot(!0,!0)},this.getMoviePercent=function(){return m&&"PercentLoaded"in m?m.PercentLoaded():null},this.beginDelayedInit=function(){T=!0,te(),setTimeout(function(){return!E&&(qt(),zt(),E=!0,!0)},20),Xt()},this.destruct=function(){f._wD("soundManager.destruct()"),f.disable(!0)};var st=function(t){var a,n,o=this,i=!1,r=[],l=0,u=null,c=a=null;this.sID=this.id=t.id,this.url=t.url,this._iO=this.instanceOptions=this.options=ut(t),this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null;var h=!this.url;this.id3={},this._debug=function(){f._wD(o.id+": Merged options:",o.options)},this.load=function(t){var a;if(t!==e?o._iO=ut(t,o.options):(t=o.options,o._iO=t,u&&u!==o.url&&(Pt("manURL"),o._iO.url=o.url,o.url=null)),o._iO.url||(o._iO.url=o.url),o._iO.url=Ut(o._iO.url),o.instanceOptions=o._iO,a=o._iO,f._wD(o.id+": load ("+a.url+")"),!a.url&&!o.url)return f._wD(o.id+": load(): url is unassigned. Exiting.",2),o;if(o.isHTML5||8!==s||o.url||a.autoPlay||f._wD(o.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),a.url===o.url&&0!==o.readyState&&2!==o.readyState)return Pt("onURL",1),3===o.readyState&&a.onload&&dt(o,function(){a.onload.apply(o,[!!o.duration])}),o;if(o.loaded=!1,o.readyState=1,o.playState=0,o.id3={},mt(a))o._setup_html5(a)._called_load?f._wD(o.id+": Ignoring request to load again"):(o._html5_canplay=!1,o.url!==a.url&&(f._wD(Pt("manURL")+": "+a.url),o._a.src=a.url,o.setPosition(0)),o._a.autobuffer="auto",o._a.preload="auto",o._a._called_load=!0);else{if(f.html5Only)return f._wD(o.id+": No flash support. Exiting."),o;if(o._iO.url&&o._iO.url.match(/data:/i))return f._wD(o.id+": data: URIs not supported via Flash. Exiting."),o;try{o.isHTML5=!1,o._iO=bt(wt(a)),o._iO.autoPlay&&(o._iO.position||o._iO.from)&&(f._wD(o.id+": Disabling autoPlay because of non-zero offset case"),o._iO.autoPlay=!1),a=o._iO,8===s?m._load(o.id,a.url,a.stream,a.autoPlay,a.usePolicyFile):m._load(o.id,a.url,!!a.stream,!!a.autoPlay,a.loops||1,!!a.autoLoad,a.usePolicyFile)}catch(t){Pt("smError",2),Et("onload",!1),Wt({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return o.url=a.url,o},this.unload=function(){return 0!==o.readyState&&(f._wD(o.id+": unload()"),o.isHTML5?(w(),o._a&&(o._a.pause(),u=gt(o._a))):8===s?m._unload(o.id,"about:blank"):m._unload(o.id),n()),o},this.destruct=function(t){f._wD(o.id+": Destruct"),o.isHTML5?(w(),o._a&&(o._a.pause(),gt(o._a),R||S(),o._a._s=null,o._a=null)):(o._iO.onfailure=null,m._destroySound(o.id)),t||f.destroySound(o.id,!0)},this.start=this.play=function(t,a){var n,r,l,u,d,c,p=!0;if(n=o.id+": play(): ",a=a===e||a,t||(t={}),o.url&&(o._iO.url=o.url),o._iO=ut(o._iO,o.options),o._iO=ut(t,o._iO),o._iO.url=Ut(o._iO.url),o.instanceOptions=o._iO,!o.isHTML5&&o._iO.serverURL&&!o.connected)return o.getAutoPlay()||(f._wD(n+" Netstream not connected yet - setting autoPlay"),o.setAutoPlay(!0)),o;if(mt(o._iO)&&(o._setup_html5(o._iO),v()),1===o.playState&&!o.paused){if(!o._iO.multiShot)return f._wD(n+"Already playing (one-shot)",1),o.isHTML5&&o.setPosition(o._iO.position),o;f._wD(n+"Already playing (multi-shot)",1)}if(t.url&&t.url!==o.url&&(o.readyState||o.isHTML5||8!==s||!h?o.load(o._iO):h=!1),o.loaded)f._wD(n.substr(0,n.lastIndexOf(":")));else if(0===o.readyState){if(f._wD(n+"Attempting to load"),o.isHTML5||f.html5Only){if(!o.isHTML5)return f._wD(n+"Unsupported type. Exiting."),o}else o._iO.autoPlay=!0;o.load(o._iO),o.instanceOptions=o._iO}else{if(2===o.readyState)return f._wD(n+"Could not load - exiting",2),o;f._wD(n+"Loading - attempting to play...")}return!o.isHTML5&&9===s&&0<o.position&&o.position===o.duration&&(f._wD(n+"Sound at end, resetting to position: 0"),t.position=0),o.paused&&0<=o.position&&(!o._iO.serverURL||0<o.position)?(f._wD(n+"Resuming from paused state",1),o.resume()):(o._iO=ut(t,o._iO),(!o.isHTML5&&null!==o._iO.position&&0<o._iO.position||null!==o._iO.from&&0<o._iO.from||null!==o._iO.to)&&0===o.instanceCount&&0===o.playState&&!o._iO.serverURL&&(l=function(){o._iO=ut(t,o._iO),o.play(o._iO)},o.isHTML5&&!o._html5_canplay?(f._wD(n+"Beginning load for non-zero offset case"),o.load({_oncanplay:l})):o.isHTML5||o.loaded||o.readyState&&2===o.readyState||(f._wD(n+"Preloading for non-zero offset case"),o.load({onload:l})),o._iO=g()),(!o.instanceCount||o._iO.multiShotEvents||o.isHTML5&&o._iO.multiShot&&!R||!o.isHTML5&&8<s&&!o.getAutoPlay())&&o.instanceCount++,o._iO.onposition&&0===o.playState&&y(o),o.playState=1,o.paused=!1,o.position=o._iO.position===e||isNaN(o._iO.position)?0:o._iO.position,o.isHTML5||(o._iO=bt(wt(o._iO))),o._iO.onplay&&a&&(o._iO.onplay.apply(o),i=!0),o.setVolume(o._iO.volume,!0),o.setPan(o._iO.pan,!0),1!==o._iO.playbackRate&&o.setPlaybackRate(o._iO.playbackRate),o.isHTML5?2>o.instanceCount?(v(),r=o._setup_html5(),o.setPosition(o._iO.position),r.play()):(f._wD(o.id+": Cloning Audio() for instance #"+o.instanceCount+"..."),u=new Audio(o._iO.url),d=function(){ft.remove(u,"ended",d),o._onfinish(o),gt(u),u=null},c=function(){ft.remove(u,"canplay",c);try{u.currentTime=o._iO.position/1e3}catch(t){St(o.id+": multiShot play() failed to apply position of "+o._iO.position/1e3)}u.play()},ft.add(u,"ended",d),o._iO.volume!==e&&(u.volume=Math.max(0,Math.min(1,o._iO.volume/100))),o.muted&&(u.muted=!0),o._iO.position?ft.add(u,"canplay",c):u.play()):(p=m._start(o.id,o._iO.loops||1,9===s?o.position:o.position/1e3,o._iO.multiShot||!1),9!==s||p||(f._wD(n+"No sound hardware, or 32-sound ceiling hit",2),o._iO.onplayerror&&o._iO.onplayerror.apply(o)))),o},this.stop=function(t){var e,a=o._iO;return 1===o.playState&&(f._wD(o.id+": stop()"),o._onbufferchange(0),o._resetOnPosition(0),o.paused=!1,o.isHTML5||(o.playState=0),_(),a.to&&o.clearOnPosition(a.to),o.isHTML5?o._a&&(e=o.position,o.setPosition(0),o.position=e,o._a.pause(),o.playState=0,o._onTimer(),w()):(m._stop(o.id,t),a.serverURL&&o.unload()),o.instanceCount=0,o._iO={},a.onstop&&a.onstop.apply(o)),o},this.setAutoPlay=function(t){f._wD(o.id+": Autoplay turned "+(t?"on":"off")),o._iO.autoPlay=t,o.isHTML5||(m._setAutoPlay(o.id,t),t&&(o.instanceCount||1!==o.readyState||(o.instanceCount++,f._wD(o.id+": Incremented instance count to "+o.instanceCount))))},this.getAutoPlay=function(){return o._iO.autoPlay},this.setPlaybackRate=function(t){var e=Math.max(.5,Math.min(4,t));if(e!==t&&f._wD(o.id+": setPlaybackRate("+t+"): limiting rate to "+e,2),o.isHTML5)try{o._iO.playbackRate=e,o._a.playbackRate=e}catch(t){f._wD(o.id+": setPlaybackRate("+e+") failed: "+t.message,2)}return o},this.setPosition=function(t){t===e&&(t=0);var a=o.isHTML5?Math.max(t,0):Math.min(o.duration||o._iO.duration,Math.max(t,0));if(o.position=a,t=o.position/1e3,o._resetOnPosition(o.position),o._iO.position=a,o.isHTML5){if(o._a){if(o._html5_canplay){if(o._a.currentTime.toFixed(3)!==t.toFixed(3)){f._wD(o.id+": setPosition("+t+")");try{o._a.currentTime=t,(0===o.playState||o.paused)&&o._a.pause()}catch(e){f._wD(o.id+": setPosition("+t+") failed: "+e.message,2)}}}else if(t)return f._wD(o.id+": setPosition("+t+"): Cannot seek yet, sound not ready",2),o;o.paused&&o._onTimer(!0)}}else t=9===s?o.position:t,o.readyState&&2!==o.readyState&&m._setPosition(o.id,t,o.paused||!o.playState,o._iO.multiShot);return o},this.pause=function(t){return o.paused||0===o.playState&&1!==o.readyState?o:(f._wD(o.id+": pause()"),o.paused=!0,o.isHTML5?(o._setup_html5().pause(),w()):(t||t===e)&&m._pause(o.id,o._iO.multiShot),o._iO.onpause&&o._iO.onpause.apply(o),o)},this.resume=function(){var t=o._iO;return o.paused?(f._wD(o.id+": resume()"),o.paused=!1,o.playState=1,o.isHTML5?(o._setup_html5().play(),v()):(t.isMovieStar&&!t.serverURL&&o.setPosition(o.position),m._pause(o.id,t.multiShot)),!i&&t.onplay?(t.onplay.apply(o),i=!0):t.onresume&&t.onresume.apply(o),o):o},this.togglePause=function(){return f._wD(o.id+": togglePause()"),0===o.playState?(o.play({position:9!==s||o.isHTML5?o.position/1e3:o.position}),o):(o.paused?o.resume():o.pause(),o)},this.setPan=function(t,a){return t===e&&(t=0),a===e&&(a=!1),o.isHTML5||m._setPan(o.id,t),o._iO.pan=t,a||(o.pan=t,o.options.pan=t),o},this.setVolume=function(t,a){return t===e&&(t=100),a===e&&(a=!1),o.isHTML5?o._a&&(f.muted&&!o.muted&&(o.muted=!0,o._a.muted=!0),o._a.volume=Math.max(0,Math.min(1,t/100))):m._setVolume(o.id,f.muted&&!o.muted||o.muted?0:t),o._iO.volume=t,a||(o.volume=t,o.options.volume=t),o},this.mute=function(){return o.muted=!0,o.isHTML5?o._a&&(o._a.muted=!0):m._setVolume(o.id,0),o},this.unmute=function(){o.muted=!1;var t=o._iO.volume!==e;return o.isHTML5?o._a&&(o._a.muted=!1):m._setVolume(o.id,t?o._iO.volume:o.options.volume),o},this.toggleMute=function(){return o.muted?o.unmute():o.mute()},this.onposition=this.onPosition=function(t,a,n){return r.push({position:parseInt(t,10),method:a,scope:n!==e?n:o,fired:!1}),o},this.clearOnPosition=function(t,e){var a;if(t=parseInt(t,10),!isNaN(t))for(a=0;a<r.length;a++)t===r[a].position&&(e&&e!==r[a].method||(r[a].fired&&l--,r.splice(a,1)))},this._processOnPosition=function(){var t,e=r.length;if(!e||!o.playState||l>=e)return!1;for(--e;0<=e;e--)!(t=r[e]).fired&&o.position>=t.position&&(t.fired=!0,l++,t.method.apply(t.scope,[t.position]));return!0},this._resetOnPosition=function(t){var e,a=r.length;if(!a)return!1;for(--a;0<=a;a--)(e=r[a]).fired&&t<=e.position&&(e.fired=!1,l--);return!0};var g=function(){var t,e,a=o._iO,n=a.from,i=a.to;return e=function(){f._wD(o.id+': "To" time of '+i+" reached."),o.clearOnPosition(i,e),o.stop()},t=function(){f._wD(o.id+': Playing "from" '+n),null===i||isNaN(i)||o.onPosition(i,e)},null===n||isNaN(n)||(a.position=n,a.multiShot=!1,t()),a},y=function(){var t,e=o._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&o.onPosition(parseInt(t,10),e[t])},_=function(){var t,e=o._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&o.clearOnPosition(parseInt(t,10))},v=function(){o.isHTML5&&Bt(o)},w=function(){o.isHTML5&&jt(o)};(n=function(t){t||(r=[],l=0),i=!1,o._hasTimer=null,o._a=null,o._html5_canplay=!1,o.bytesLoaded=null,o.bytesTotal=null,o.duration=o._iO&&o._iO.duration?o._iO.duration:null,o.durationEstimate=null,o.buffered=[],o.eqData=[],o.eqData.left=[],o.eqData.right=[],o.failures=0,o.isBuffering=!1,o.instanceOptions={},o.instanceCount=0,o.loaded=!1,o.metadata={},o.readyState=0,o.muted=!1,o.paused=!1,o.peakData={left:0,right:0},o.waveformData={left:[],right:[]},o.playState=0,o.position=null,o.id3={}})(),this._onTimer=function(t){var e,n,i=!1,s={};return(o._hasTimer||t)&&o._a&&(t||(0<o.playState||1===o.readyState)&&!o.paused)&&((e=o._get_html5_duration())!==a&&(a=e,o.duration=e,i=!0),o.durationEstimate=o.duration,(n=1e3*o._a.currentTime||0)!==c&&(c=n,i=!0),(i||t)&&o._whileplaying(n,s,s,s,s)),i},this._get_html5_duration=function(){var t=o._iO;return(t=o._a&&o._a.duration?1e3*o._a.duration:t&&t.duration?t.duration:null)&&!isNaN(t)&&t!==1/0?t:null},this._apply_loop=function(t,e){!t.loop&&1<e&&f._wD("Note: Native HTML5 looping is infinite.",1),t.loop=1<e?"loop":""},this._setup_html5=function(t){var e;t=ut(o._iO,t);var a=R?p:o._a,i=decodeURI(t.url);if(R?i===decodeURI(d)&&(e=!0):i===decodeURI(u)&&(e=!0),a){if(a._s)if(R)a._s&&a._s.playState&&!e&&a._s.stop();else if(!R&&i===decodeURI(u))return o._apply_loop(a,t.loops),a;e||(u&&n(!1),a.src=t.url,o.url=t.url,u=t.url,d=t.url,a._called_load=!1)}else t.autoLoad||t.autoPlay?(o._a=new Audio(t.url),o._a.load()):o._a=q&&10>opera.version()?new Audio(null):new Audio,(a=o._a)._called_load=!1,R&&(p=a);return o.isHTML5=!0,o._a=a,a._s=o,b(),o._apply_loop(a,t.loops),t.autoLoad||t.autoPlay?o.load():(a.autobuffer=!1,a.preload="auto"),a};var b=function(){if(o._a._added_events)return!1;var t,e,a;for(t in o._a._added_events=!0,pt)pt.hasOwnProperty(t)&&(e=t,a=pt[t],o._a&&o._a.addEventListener(e,a,!1));return!0},S=function(){var t,e,a;for(t in f._wD(o.id+": Removing event listeners"),o._a._added_events=!1,pt)pt.hasOwnProperty(t)&&(e=t,a=pt[t],o._a&&o._a.removeEventListener(e,a,!1))};this._onload=function(t){var e,a=!!t||!o.isHTML5&&8===s&&o.duration;return e=o.id+": ",f._wD(e+(a?"onload()":"Failed to load / invalid sound?"+(o.duration?" -":" Zero-length duration reported.")+" ("+o.url+")"),a?1:2),a||o.isHTML5||(!0===f.sandbox.noRemote&&f._wD(e+vt("noNet"),1),!0===f.sandbox.noLocal&&f._wD(e+vt("noLocal"),1)),o.loaded=a,o.readyState=a?3:2,o._onbufferchange(0),a||o.isHTML5||o._onerror(),o._iO.onload&&dt(o,function(){o._iO.onload.apply(o,[a])}),!0},this._onerror=function(t,e){o._iO.onerror&&dt(o,function(){o._iO.onerror.apply(o,[t,e])})},this._onbufferchange=function(t){return 0!==o.playState&&!(t&&o.isBuffering||!t&&!o.isBuffering)&&(o.isBuffering=1===t,o._iO.onbufferchange&&(f._wD(o.id+": Buffer state change: "+t),o._iO.onbufferchange.apply(o,[t])),!0)},this._onsuspend=function(){return o._iO.onsuspend&&(f._wD(o.id+": Playback suspended"),o._iO.onsuspend.apply(o)),!0},this._onfailure=function(t,e,a){o.failures++,f._wD(o.id+": Failure ("+o.failures+"): "+t),o._iO.onfailure&&1===o.failures?o._iO.onfailure(t,e,a):f._wD(o.id+": Ignoring failure")},this._onwarning=function(t,e,a){o._iO.onwarning&&o._iO.onwarning(t,e,a)},this._onfinish=function(){var t=o._iO.onfinish;o._onbufferchange(0),o._resetOnPosition(0),o.instanceCount&&(o.instanceCount--,o.instanceCount||(_(),o.playState=0,o.paused=!1,o.instanceCount=0,o.instanceOptions={},o._iO={},w(),o.isHTML5&&(o.position=0)),o.instanceCount&&!o._iO.multiShotEvents||t&&(f._wD(o.id+": onfinish()"),dt(o,function(){t.apply(o)})))},this._whileloading=function(t,e,a,n){var i=o._iO;o.bytesLoaded=t,o.bytesTotal=e,o.duration=Math.floor(a),o.bufferLength=n,o.isHTML5||i.isMovieStar?o.durationEstimate=o.duration:i.duration?o.durationEstimate=o.duration>i.duration?o.duration:i.duration:o.durationEstimate=parseInt(o.bytesTotal/o.bytesLoaded*o.duration,10),o.isHTML5||(o.buffered=[{start:0,end:o.duration}]),(3!==o.readyState||o.isHTML5)&&i.whileloading&&i.whileloading.apply(o)},this._whileplaying=function(t,a,n,i,r){var l,u=o._iO;return!isNaN(t)&&null!==t&&(o.position=Math.max(0,t),o._processOnPosition(),!o.isHTML5&&8<s&&(u.usePeakData&&a!==e&&a&&(o.peakData={left:a.leftPeak,right:a.rightPeak}),u.useWaveformData&&n!==e&&n&&(o.waveformData={left:n.split(","),right:i.split(",")}),u.useEQData&&r!==e&&r&&r.leftEQ&&(l=r.leftEQ.split(","),o.eqData=l,o.eqData.left=l,r.rightEQ!==e&&r.rightEQ&&(o.eqData.right=r.rightEQ.split(",")))),1===o.playState&&(o.isHTML5||8!==s||o.position||!o.isBuffering||o._onbufferchange(0),u.whileplaying&&u.whileplaying.apply(o)),!0)},this._oncaptiondata=function(t){f._wD(o.id+": Caption data received."),o.captiondata=t,o._iO.oncaptiondata&&o._iO.oncaptiondata.apply(o,[t])},this._onmetadata=function(t,e){f._wD(o.id+": Metadata received.");var a,n={},i=0;for(a=t.length;i<a;i++)n[t[i]]=e[i];o.metadata=n,o._iO.onmetadata&&o._iO.onmetadata.call(o,o.metadata)},this._onid3=function(t,e){f._wD(o.id+": ID3 data received.");var a,n=[],i=0;for(a=t.length;i<a;i++)n[t[i]]=e[i];o.id3=ut(o.id3,n),o._iO.onid3&&o._iO.onid3.apply(o)},this._onconnect=function(t){t=1===t,f._wD(o.id+": "+(t?"Connected.":"Failed to connect? - "+o.url),t?1:2),(o.connected=t)&&(o.failures=0,Lt(o.id)&&(o.getAutoPlay()?o.play(e,o.getAutoPlay()):o._iO.autoLoad&&o.load()),o._iO.onconnect&&o._iO.onconnect.apply(o,[t]))},this._ondataerror=function(t){0<o.playState&&(f._wD(o.id+": Data error: "+t),o._iO.ondataerror&&o._iO.ondataerror.apply(o))},this._debug()},rt=function(){return _.body||_.getElementsByTagName("div")[0]},lt=function(t){return _.getElementById(t)},ut=function(t,a){var n,o,i=t||{};for(o in n=a===e?f.defaultOptions:a)n.hasOwnProperty(o)&&i[o]===e&&("object"!=typeof n[o]||null===n[o]?i[o]=n[o]:i[o]=ut(i[o],n[o]));return i},dt=function(e,a){e.isHTML5||8!==s?a():t.setTimeout(a,0)},ct={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},ht=function(t,a){var n,o=!0,i=a!==e,s=f.setupOptions;if(t===e){for(n in o=[],s)s.hasOwnProperty(n)&&o.push(n);for(n in ct)ct.hasOwnProperty(n)&&("object"==typeof f[n]?o.push(n+": {...}"):f[n]instanceof Function?o.push(n+": function() {...}"):o.push(n));return f._wD(vt("setup",o.join(", "))),!1}for(n in t)if(t.hasOwnProperty(n))if("object"!=typeof t[n]||null===t[n]||t[n]instanceof Array||t[n]instanceof RegExp)i&&ct[a]!==e?f[a][n]=t[n]:s[n]!==e?(f.setupOptions[n]=t[n],f[n]=t[n]):ct[n]===e?(St(vt(f[n]===e?"setupUndef":"setupError",n),2),o=!1):f[n]instanceof Function?f[n].apply(f,t[n]instanceof Array?t[n]:[t[n]]):f[n]=t[n];else{if(ct[n]!==e)return ht(t[n],n);St(vt(f[n]===e?"setupUndef":"setupError",n),2),o=!1}return o},ft=function(){function e(t){var e=(t=x.call(t)).length;return n?(t[1]="on"+t[1],3<e&&t.pop()):3===e&&t.push(!1),t}function a(t,e){var a=t.shift(),i=[o[e]];n?a[i](t[0],t[1]):a[i].apply(a,t)}var n=t.attachEvent,o={add:n?"attachEvent":"addEventListener",remove:n?"detachEvent":"removeEventListener"};return{add:function(){a(e(arguments),"add")},remove:function(){a(e(arguments),"remove")}}}(),pt={abort:i(function(){f._wD(this._s.id+": abort")}),canplay:i(function(){var t,a=this._s;if(!a._html5_canplay){if(a._html5_canplay=!0,f._wD(a.id+": canplay"),a._onbufferchange(0),t=a._iO.position===e||isNaN(a._iO.position)?null:a._iO.position/1e3,this.currentTime!==t){f._wD(a.id+": canplay: Setting position to "+t);try{this.currentTime=t}catch(e){f._wD(a.id+": canplay: Setting position of "+t+" failed: "+e.message,2)}}a._iO._oncanplay&&a._iO._oncanplay()}}),canplaythrough:i(function(){var t=this._s;t.loaded||(t._onbufferchange(0),t._whileloading(t.bytesLoaded,t.bytesTotal,t._get_html5_duration()),t._onload(!0))}),durationchange:i(function(){var t=this._s,e=t._get_html5_duration();isNaN(e)||e===t.duration||(f._wD(this._s.id+": durationchange ("+e+")"+(t.duration?", previously "+t.duration:"")),t.durationEstimate=t.duration=e)}),ended:i(function(){var t=this._s;f._wD(t.id+": ended"),t._onfinish()}),error:i(function(){var t=ot[this.error.code]||null;f._wD(this._s.id+": HTML5 error, code "+this.error.code+(t?" ("+t+")":"")),this._s._onload(!1),this._s._onerror(this.error.code,t)}),loadeddata:i(function(){var t=this._s;f._wD(t.id+": loadeddata"),t._loaded||W||(t.duration=t._get_html5_duration())}),loadedmetadata:i(function(){f._wD(this._s.id+": loadedmetadata")}),loadstart:i(function(){f._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:i(function(){this._s._onbufferchange(0)}),playing:i(function(){f._wD(this._s.id+": playing "+String.fromCharCode(9835)),this._s._onbufferchange(0)}),progress:i(function(t){var e,a=this._s,n=0,o="progress"===t.type,i=t.target.buffered,s=t.loaded||0,r=t.total||1;if(a.buffered=[],i&&i.length){var l=0;for(e=i.length;l<e;l++)a.buffered.push({start:1e3*i.start(l),end:1e3*i.end(l)});if(n=1e3*(i.end(0)-i.start(0)),s=Math.min(1,n/(1e3*t.target.duration)),o&&1<i.length){for(n=[],e=i.length,l=0;l<e;l++)n.push(1e3*t.target.buffered.start(l)+"-"+1e3*t.target.buffered.end(l));f._wD(this._s.id+": progress, timeRanges: "+n.join(", "))}o&&!isNaN(s)&&f._wD(this._s.id+": progress, "+Math.floor(100*s)+"% loaded")}isNaN(s)||(a._whileloading(s,r,a._get_html5_duration()),s&&r&&s===r&&pt.canplaythrough.call(this,t))}),ratechange:i(function(){f._wD(this._s.id+": ratechange")}),suspend:i(function(t){var e=this._s;f._wD(this._s.id+": suspend"),pt.progress.call(this,t),e._onsuspend()}),stalled:i(function(){f._wD(this._s.id+": stalled")}),timeupdate:i(function(){this._s._onTimer()}),waiting:i(function(){var t=this._s;f._wD(this._s.id+": waiting"),t._onbufferchange(1)})},mt=function(t){return!(!t||!(t.type||t.url||t.serverURL))&&!(t.serverURL||t.type&&o(t.type))&&(t.type?yt({type:t.type}):yt({url:t.url})||f.html5Only||t.url.match(/data:/i))},gt=function(t){var a;return t&&(a=W?"about:blank":f.html5.canPlayType("audio/wav")?"data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==":"about:blank",t.src=a,t._called_unload!==e&&(t._called_load=!1)),R&&(d=null),a},yt=function(t){if(!f.useHTML5Audio||!f.hasHTML5)return!1;var a,n,i,s,r=t.url||null;t=t.type||null;var l=f.audioFormats;if(t&&f.html5[t]!==e)return f.html5[t]&&!o(t);if(!u){for(s in u=[],l)l.hasOwnProperty(s)&&(u.push(s),l[s].related&&(u=u.concat(l[s].related)));u=new RegExp("\\.("+u.join("|")+")(\\?.*)?$","i")}return(i=r?r.toLowerCase().match(u):null)&&i.length?i=i[1]:t&&(i=(-1!==(n=t.indexOf(";"))?t.substr(0,n):t).substr(6)),i&&f.html5[i]!==e?a=f.html5[i]&&!o(i):(t="audio/"+i,a=f.html5.canPlayType({type:t}),f.html5[i]=a,a=a&&f.html5[t]&&!o(t)),a},_t={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:"soundManagerexception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:"soundManager: Verify that %s is a valid path.",tryDebug:"Try soundManager.debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:"soundManager: Non-HTTP page ("+_.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:"soundManager: Special case: Waiting for SWF to load with window focus...",waitForever:"soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:"soundManager: Waiting for 100% SWF load...",needFunction:"soundManager: Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"soundManager: _debug(): Current sound objects",waitOnload:"soundManager: Waiting for window.onload()",docLoaded:"soundManager: Document already loaded",onload:"soundManager: initComplete(): calling soundManager.onload()",onloadOK:"soundManager.onload() complete",didInit:"soundManager: init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"soundManager: Failed to remove Flash node.",shutdown:"soundManager.disable(): Shutting down",queue:"soundManager: Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+nt.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:"soundManager: flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:"soundManager.load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:"soundManager: Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:"soundManager: Got window focus.",policy:"Enabling usePolicyFile for data access",setup:"soundManager.setup(): allowed parameters: %s",setupError:'soundManager.setup(): "%s" cannot be assigned with this method.',setupUndef:'soundManager.setup(): Could not find option "%s"',setupLate:"soundManager.setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:"soundManager: Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:"soundManager.reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device.",ignoreMobile:"Ignoring mobile restrictions for this device."},vt=function(){var t,e,a,n;if(e=(t=x.call(arguments)).shift(),(n=_t&&_t[e]?_t[e]:"")&&t&&t.length)for(e=0,a=t.length;e<a;e++)n=n.replace("%s",t[e]);return n},wt=function(t){return 8===s&&1<t.loops&&t.stream&&(Pt("as2loop"),t.stream=!1),t},bt=function(t,e){return t&&!t.usePolicyFile&&(t.onid3||t.usePeakData||t.useWaveformData||t.useEQData)&&(f._wD((e||"")+vt("policy")),t.usePolicyFile=!0),t},St=function(t){Q&&console.warn!==e?console.warn(t):f._wD(t)},Mt=function(){return!1},Dt=function(t){for(var e in t)t.hasOwnProperty(e)&&"function"==typeof t[e]&&(t[e]=Mt)},Tt=function(t){t===e&&(t=!1),(D||t)&&f.disable(t)},Ot=function(){8!==(s=parseInt(f.flashVersion,10))&&9!==s&&(f._wD(vt("badFV",s,8)),f.flashVersion=s=8);var t=f.debugMode||f.debugFlash?"_debug.swf":".swf";f.useHTML5Audio&&!f.html5Only&&f.audioFormats.mp4.required&&9>s&&(f._wD(vt("needfl9")),f.flashVersion=s=9),f.version=f.versionNumber+(f.html5Only?" (HTML5-only mode)":9===s?" (AS3/Flash 9)":" (AS2/Flash 8)"),8<s?(f.defaultOptions=ut(f.defaultOptions,f.flash9Options),f.features.buffering=!0,f.defaultOptions=ut(f.defaultOptions,f.movieStarOptions),f.filePatterns.flash9=new RegExp("\\.(mp3|"+et.join("|")+")(\\?.*)?$","i"),f.features.movieStar=!0):f.features.movieStar=!1,f.filePattern=f.filePatterns[8!==s?"flash9":"flash8"],f.movieURL=(8===s?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",t),f.features.peakData=f.features.waveformData=f.features.eqData=8<s},Ct=function(){var t,e,a,n,o;if((f.debugURLParam.test(y)&&(f.setupOptions.debugMode=f.debugMode=!0),!lt(f.debugID))&&!(!f.debugMode||lt(f.debugID)||Q&&f.useConsole&&f.consoleOnly)){for(o in(t=_.createElement("div")).id=f.debugID+"-toggle",n={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},t.appendChild(_.createTextNode("-")),t.onclick=It,t.title="Toggle SM2 debug console",g.match(/msie 6/i)&&(t.style.position="absolute",t.style.cursor="hand"),n)n.hasOwnProperty(o)&&(t.style[o]=n[o]);if((e=_.createElement("div")).id=f.debugID,e.style.display=f.debugMode?"block":"none",f.debugMode&&!lt(t.id)){try{(a=rt()).appendChild(t)}catch(t){throw Error(vt("domError")+" \n"+t.toString())}a.appendChild(e)}}},Lt=this.getSoundById,Pt=function(t,e){return t?f._wD(vt(t),e):""},It=function(){var t=lt(f.debugID),e=lt(f.debugID+"-toggle");t&&(w?(e.innerHTML="+",t.style.display="none"):(e.innerHTML="-",t.style.display="block"),w=!w)},Et=function(a,n,o){if(t.sm2Debugger!==e)try{sm2Debugger.handleEvent(a,n,o)}catch(t){return!1}return!0},At=function(){var t=[];return f.debugMode&&t.push(nt.sm2Debug),f.debugFlash&&t.push(nt.flashDebug),f.useHighPerformance&&t.push(nt.highPerf),t.join(" ")},Ft=function(){var t=vt("fbHandler"),e=f.getMoviePercent(),a={type:"FLASHBLOCK"};f.html5Only||(f.ok()?(f.didFlashBlock&&f._wD(t+": Unblocked"),f.oMC&&(f.oMC.className=[At(),nt.swfDefault,nt.swfLoaded+(f.didFlashBlock?" "+nt.swfUnblocked:"")].join(" "))):(N&&(f.oMC.className=At()+" "+nt.swfDefault+" "+(null===e?nt.swfTimedout:nt.swfError),f._wD(t+": "+vt("fbTimeout")+(e?" ("+vt("fbLoaded")+")":""))),f.didFlashBlock=!0,Nt({type:"ontimeout",ignoreInit:!0,error:a}),Wt(a)))},kt=function(t,a,n){v[t]===e&&(v[t]=[]),v[t].push({method:a,scope:n||null,fired:!1})},Nt=function(t){if(t||(t={type:f.ok()?"onready":"ontimeout"}),!M&&t&&!t.ignoreInit||"ontimeout"===t.type&&(f.ok()||D&&!t.ignoreInit))return!1;var e,a={success:t&&t.ignoreInit?f.ok():!D},n=t&&t.type&&v[t.type]||[],o=[];a=[a];var i=N&&!f.ok();for(t.error&&(a[0].error=t.error),t=0,e=n.length;t<e;t++)!0!==n[t].fired&&o.push(n[t]);if(o.length)for(t=0,e=o.length;t<e;t++)o[t].scope?o[t].method.apply(o[t].scope,a):o[t].method.apply(this,a),i||(o[t].fired=!0);return!0},xt=function(){t.setTimeout(function(){f.useFlashBlock&&Ft(),Nt(),"function"==typeof f.onload&&(Pt("onload",1),f.onload.apply(t),Pt("onloadOK",1)),f.waitForWindowLoad&&ft.add(t,"load",xt)},1)},Rt=function(){if(c!==e)return c;var a,n=!1,o=navigator,i=t.ActiveXObject;try{var s=o.plugins}catch(t){s=void 0}if(s&&s.length)(a=o.mimeTypes)&&a["application/x-shockwave-flash"]&&a["application/x-shockwave-flash"].enabledPlugin&&a["application/x-shockwave-flash"].enabledPlugin.description&&(n=!0);else if(i!==e&&!g.match(/MSAppHost/i)){try{var r=new i("ShockwaveFlash.ShockwaveFlash")}catch(t){r=null}n=!!r}return c=n,n},Ht=function(){var t,e,a=f.audioFormats;if(U&&g.match(/os (1|2|3_0|3_1)\s/i)?(f.hasHTML5=!1,f.html5Only=!0,f.oMC&&(f.oMC.style.display="none")):f.useHTML5Audio&&(f.html5&&f.html5.canPlayType||(f._wD("SoundManager: No HTML5 Audio() support detected."),f.hasHTML5=!1),X&&f._wD("soundManager: Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(c?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),f.useHTML5Audio&&f.hasHTML5)for(e in l=!0,a)a.hasOwnProperty(e)&&a[e].required&&(f.html5.canPlayType(a[e].type)?f.preferFlash&&(f.flash[e]||f.flash[a[e].type])&&(t=!0):(l=!1,t=!0));return f.ignoreFlash&&(t=!1,l=!0),f.html5Only=f.hasHTML5&&f.useHTML5Audio&&!t,!f.html5Only},Ut=function(t){var e,a=0;if(t instanceof Array){var n=0;for(e=t.length;n<e;n++)if(t[n]instanceof Object){if(f.canPlayMIME(t[n].type)){a=n;break}}else if(f.canPlayURL(t[n])){a=n;break}t[a].url&&(t[a]=t[a].url),t=t[a]}return t},Bt=function(t){t._hasTimer||(t._hasTimer=!0,!z&&f.html5PollingInterval&&(null===F&&0===A&&(F=setInterval(Vt,f.html5PollingInterval)),A++))},jt=function(t){t._hasTimer&&(t._hasTimer=!1,!z&&f.html5PollingInterval&&A--)},Vt=function(){var t;if(null!==F&&!A)return clearInterval(F),void(F=null);for(t=f.soundIDs.length-1;0<=t;t--)f.sounds[f.soundIDs[t]].isHTML5&&f.sounds[f.soundIDs[t]]._hasTimer&&f.sounds[f.soundIDs[t]]._onTimer()},Wt=function(a){a=a!==e?a:{},"function"==typeof f.onerror&&f.onerror.apply(t,[{type:a.type!==e?a.type:null}]),a.fatal!==e&&a.fatal&&f.disable()};this._setSandboxType=function(t){var a=f.sandbox;a.type=t,a.description=a.types[a.types[t]!==e?t:"unknown"],"localWithFile"===a.type?(a.noRemote=!0,a.noLocal=!1,Pt("secNote",2)):"localWithNetwork"===a.type?(a.noRemote=!1,a.noLocal=!0):"localTrusted"===a.type&&(a.noRemote=!1,a.noLocal=!1)},this._externalInterfaceOK=function(t){if(!f.swfLoaded){var e;if(Et("swf",!0),Et("flashtojs",!0),f.swfLoaded=!0,$=!1,X&&function(){if(X&&Rt()){var t,e,a=f.audioFormats;for(e in a)if(a.hasOwnProperty(e)&&("mp3"===e||"mp4"===e)&&(f._wD("soundManager: Using flash fallback for "+e+" format"),f.html5[e]=!1,a[e]&&a[e].related))for(t=a[e].related.length-1;0<=t;t--)f.html5[a[e].related[t]]=!1}}(),!t||t.replace(/\+dev/i,"")!==f.versionNumber.replace(/\+dev/i,""))return e='soundManager: Fatal: JavaScript file build "'+f.versionNumber+'" does not match Flash SWF build "'+t+'" at '+f.url+". Ensure both are up-to-date.",void setTimeout(function(){throw Error(e)},0);setTimeout(Zt,j?100:1)}};var qt=function(t,a){function n(){var t=[],e=[],a="SoundManager "+f.version+(!f.html5Only&&f.useHTML5Audio?f.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"");f.html5Only?f.html5PollingInterval&&t.push("html5PollingInterval ("+f.html5PollingInterval+"ms)"):(f.preferFlash&&t.push("preferFlash"),f.useHighPerformance&&t.push("useHighPerformance"),f.flashPollingInterval&&t.push("flashPollingInterval ("+f.flashPollingInterval+"ms)"),f.html5PollingInterval&&t.push("html5PollingInterval ("+f.html5PollingInterval+"ms)"),f.wmode&&t.push("wmode ("+f.wmode+")"),f.debugFlash&&t.push("debugFlash"),f.useFlashBlock&&t.push("flashBlock")),t.length&&(e=e.concat([t.join(" + ")])),f._wD(a+(e.length?" + "+e.join(", "):""),1),Kt()}function o(t,e){return'<param name="'+t+'" value="'+e+'" />'}if(b&&S)return!1;if(f.html5Only)return Ot(),n(),f.oMC=lt(f.movieID),Zt(),b=!0,S=!0,!1;var i,s,r,l,u,d,c=a||f.url,h=f.altURL||c,p=rt(),m=At();if(i=(m=_.getElementsByTagName("html")[0])&&m.dir&&m.dir.match(/rtl/i),t=t===e?f.id:t,Ot(),f.url=function(t){var e;if(t)if(t.match(/\.swf(\?.*)?$/i)){if(t.substr(t.toLowerCase().lastIndexOf(".swf?")+4))return t}else t.lastIndexOf("/")!==t.length-1&&(t+="/");return e=(t&&-1!==t.lastIndexOf("/")?t.substr(0,t.lastIndexOf("/")+1):"./")+f.movieURL,f.noSWFCache&&(e+="?ts="+(new Date).getTime()),e}(J?c:h),a=f.url,f.wmode=!f.wmode&&f.useHighPerformance?"transparent":f.wmode,null!==f.wmode&&(g.match(/msie 8/i)||!j&&!f.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(k.push(_t.spcWmode),f.wmode=null),s={name:t,id:t,src:a,quality:"high",allowScriptAccess:f.allowScriptAccess,bgcolor:f.bgColor,pluginspage:Z+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:f.wmode,hasPriority:"true"},f.debugFlash&&(s.FlashVars="debug=1"),f.wmode||delete s.wmode,j){c=_.createElement("div");var y=['<object id="'+t+'" data="'+a+'" type="'+s.type+'" title="'+s.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',o("movie",a),o("AllowScriptAccess",f.allowScriptAccess),o("quality",s.quality),f.wmode?o("wmode",f.wmode):"",o("bgcolor",f.bgColor),o("hasPriority","true"),f.debugFlash?o("FlashVars",s.FlashVars):"","</object>"].join("")}else for(r in c=_.createElement("embed"),s)s.hasOwnProperty(r)&&c.setAttribute(r,s[r]);if(Ct(),m=At(),p=rt())if(f.oMC=lt(f.movieID)||_.createElement("div"),f.oMC.id)s=f.oMC.className,f.oMC.className=(s?s+" ":nt.swfDefault)+(m?" "+m:""),f.oMC.appendChild(c),j&&((l=f.oMC.appendChild(_.createElement("div"))).className=nt.swfBox,l.innerHTML=y),S=!0;else{if(f.oMC.id=f.movieID,f.oMC.className=nt.swfDefault+" "+m,u=null,l=null,f.useFlashBlock||(f.useHighPerformance?u={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(u={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},i&&(u.left=Math.abs(parseInt(u.left,10))+"px"))),V&&(f.oMC.style.zIndex=1e4),!f.debugFlash)for(d in u)u.hasOwnProperty(d)&&(f.oMC.style[d]=u[d]);try{j||f.oMC.appendChild(c),p.appendChild(f.oMC),j&&((l=f.oMC.appendChild(_.createElement("div"))).className=nt.swfBox,l.innerHTML=y),S=!0}catch(t){throw Error(vt("domError")+" \n"+t.toString())}}return b=!0,n(),!0},zt=function(){return f.html5Only?(qt(),!1):!m&&(f.url?((m=f.getMovie(f.id))||(L?(j?f.oMC.innerHTML=P:f.oMC.appendChild(L),L=null,b=!0):qt(f.id,f.url),m=f.getMovie(f.id)),"function"==typeof f.oninitmovie&&setTimeout(f.oninitmovie,1),Gt(),!0):(Pt("noURL"),!1))},Xt=function(){setTimeout(Yt,1e3)},Qt=function(){t.setTimeout(function(){St("soundManager: useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),f.setup({preferFlash:!1}).reboot(),f.didFlashBlock=!0,f.beginDelayedInit()},1)},Yt=function(){var e,a=!1;f.url&&(I||(I=!0,ft.remove(t,"load",Xt),c&&$&&!Y?Pt("waitFocus"):(M||0<(e=f.getMoviePercent())&&100>e&&(a=!0),setTimeout(function(){if(e=f.getMoviePercent(),a)return I=!1,f._wD(vt("waitSWF")),void t.setTimeout(Xt,1);M||(f._wD("soundManager: No Flash response within expected time. Likely causes: "+(0===e?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(f.debugFlash?" "+vt("checkSWF"):""),2),!J&&e&&(Pt("localFail",2),f.debugFlash||Pt("tryDebug",2)),0===e&&f._wD(vt("swf404",f.url),1),Et("flashtojs",!1,": Timed out"+(J?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)"))),!M&&G&&(null===e?f.useFlashBlock||0===f.flashLoadTimeout?(f.useFlashBlock&&Ft(),Pt("waitForever")):!f.useFlashBlock&&l?Qt():(Pt("waitForever"),Nt({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===f.flashLoadTimeout?Pt("waitForever"):!f.useFlashBlock&&l?Qt():Tt(!0))},f.flashLoadTimeout))))},$t=function(){return!Y&&$&&(Y=G=!0,Pt("gotFocus"),I=!1,Xt()),ft.remove(t,"focus",$t),!0},Gt=function(){k.length&&(f._wD("SoundManager 2: "+k.join(" "),1),k=[])},Kt=function(){Gt();var t,e=[];if(f.useHTML5Audio&&f.hasHTML5){for(t in f.audioFormats)f.audioFormats.hasOwnProperty(t)&&e.push(t+" = "+f.html5[t]+(!f.html5[t]&&N&&f.flash[t]?" (using flash)":f.preferFlash&&f.flash[t]&&N?" (preferring flash)":f.html5[t]?"":" ("+(f.audioFormats[t].required?"required, ":"")+"and no flash support)"));f._wD("SoundManager 2 HTML5 support: "+e.join(", "),1)}},Jt=function(e){if(M)return!1;if(f.html5Only)return Pt("sm2Loaded",1),M=!0,xt(),Et("onload",!0),!0;var a,n=!0;return f.useFlashBlock&&f.flashLoadTimeout&&!f.getMoviePercent()||(M=!0),a={type:!c&&N?"NO_FLASH":"INIT_TIMEOUT"},f._wD("SoundManager 2 "+(D?"failed to load":"loaded")+" ("+(D?"Flash security/load error":"OK")+") "+String.fromCharCode(D?10006:10003),D?2:1),D||e?(f.useFlashBlock&&f.oMC&&(f.oMC.className=At()+" "+(null===f.getMoviePercent()?nt.swfTimedout:nt.swfError)),Nt({type:"ontimeout",error:a,ignoreInit:!0}),Et("onload",!1),Wt(a),n=!1):Et("onload",!0),D||(f.waitForWindowLoad&&!T?(Pt("waitOnload"),ft.add(t,"load",xt)):(f.waitForWindowLoad&&T&&Pt("docLoaded"),xt())),n},Zt=function(){if(M)return Pt("didInit"),!1;if(f.html5Only)return M||(ft.remove(t,"load",f.beginDelayedInit),f.enabled=!0,Jt()),!0;zt();try{m._externalInterfaceTest(!1),function(t,e){m&&m._setPolling(t,e)}(!0,f.flashPollingInterval||(f.useHighPerformance?10:50)),f.debugMode||m._disableDebug(),f.enabled=!0,Et("jstoflash",!0),f.html5Only||ft.add(t,"unload",Mt)}catch(t){return f._wD("js/flash exception: "+t.toString()),Et("jstoflash",!1),Wt({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),Tt(!0),Jt(),!1}return Jt(),ft.remove(t,"load",f.beginDelayedInit),!0},te=function(){return!r&&(r=!0,function(){var t,a=f.setupOptions;for(t in a)a.hasOwnProperty(t)&&(f[t]===e?f[t]=a[t]:f[t]!==a[t]&&(f.setupOptions[t]=f[t]))}(),Ct(),!c&&f.hasHTML5&&(f._wD("SoundManager 2: No Flash detected"+(f.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),f.setup({useHTML5Audio:!0,preferFlash:!1})),function(){function t(t){var e,a=!1,n=!1;if(!s||"function"!=typeof s.canPlayType)return a;if(t instanceof Array){for(i=0,e=t.length;i<e;i++)(f.html5[t[i]]||s.canPlayType(t[i]).match(f.html5Test))&&(n=!0,f.html5[t[i]]=!0,f.flash[t[i]]=!!t[i].match(K));a=n}else a=!(!(e=!(!s||"function"!=typeof s.canPlayType)&&s.canPlayType(t))||!e.match(f.html5Test));return a}if(!f.useHTML5Audio||!f.hasHTML5)return f.html5.usingFlash=!0,N=!0,!1;var a,n,o,i,s=Audio!==e?q&&10>opera.version()?new Audio(null):new Audio:null,r={};for(a in o=f.audioFormats)if(o.hasOwnProperty(a)&&(n="audio/"+a,r[a]=t(o[a].type),r[n]=r[a],a.match(K)?(f.flash[a]=!0,f.flash[n]=!0):(f.flash[a]=!1,f.flash[n]=!1),o[a]&&o[a].related))for(i=o[a].related.length-1;0<=i;i--)r["audio/"+o[a].related[i]]=r[a],f.html5[o[a].related[i]]=r[a],f.flash[o[a].related[i]]=r[a];r.canPlayType=s?t:null,f.html5=ut(f.html5,r),f.html5.usingFlash=Ht(),N=f.html5.usingFlash}(),!c&&N&&(k.push(_t.needFlash),f.setup({flashLoadTimeout:1})),_.removeEventListener&&_.removeEventListener("DOMContentLoaded",te,!1),zt(),!0)},ee=function(){return"complete"===_.readyState&&(te(),_.detachEvent("onreadystatechange",ee)),!0},ae=function(){T=!0,te(),ft.remove(t,"load",ae)};Rt(),ft.add(t,"focus",$t),ft.add(t,"load",Xt),ft.add(t,"load",ae),_.addEventListener?_.addEventListener("DOMContentLoaded",te,!1):_.attachEvent?_.attachEvent("onreadystatechange",ee):(Et("onload",!1),Wt({type:"NO_DOM2_EVENTS",fatal:!0}))}if(!t||!t.document)throw Error("SoundManager requires a browser with window and document objects.");var n=null;t.SM2_DEFER!==e&&SM2_DEFER||(n=new a),"object"==typeof module&&module&&"object"==typeof module.exports?(module.exports.SoundManager=a,module.exports.soundManager=n):"function"==typeof define&&define.amd&&define(function(){return{constructor:a,getInstance:function(e){return!t.soundManager&&e instanceof Function&&((e=e(a))instanceof a&&(t.soundManager=e)),t.soundManager}}}),t.SoundManager=a,t.soundManager=n}(window),Animator.prototype={setOptions:function(t){this.options=Animator.applyDefaults({interval:20,duration:400,onComplete:function(){},onStep:function(){},transition:Animator.tx.easeInOut},t)},seekTo:function(t){this.seekFromTo(this.state,t)},seekFromTo:function(t,e){this.target=Math.max(0,Math.min(1,e)),this.state=Math.max(0,Math.min(1,t)),this.lastTime=(new Date).getTime(),this.intervalId||(this.intervalId=window.setInterval(this.timerDelegate,this.options.interval))},jumpTo:function(t){this.target=this.state=Math.max(0,Math.min(1,t)),this.propagate()},toggle:function(){this.seekTo(1-this.target)},addSubject:function(t,e){return this.subjects[this.subjects.length]=t,this.subjectScopes[this.subjectScopes.length]=e,this},clearSubjects:function(){this.subjects=[],this.subjectScopes=[]},propagate:function(){for(var t=this.options.transition(this.state),e=0;e<this.subjects.length;e++)this.subjects[e].setState?this.subjects[e].setState(t):this.subjects[e].apply(this.subjectScopes[e],[t])},onTimerEvent:function(){var t=(new Date).getTime(),e=t-this.lastTime;this.lastTime=t,t=e/this.options.duration*(this.state<this.target?1:-1),Math.abs(t)>=Math.abs(this.state-this.target)?this.state=this.target:this.state+=t;try{this.propagate()}finally{this.options.onStep.call(this),this.target==this.state&&(window.clearInterval(this.intervalId),this.intervalId=null,this.options.onComplete.call(this))}},play:function(){this.seekFromTo(0,1)},reverse:function(){this.seekFromTo(1,0)},inspect:function(){for(var t="#<Animator:\n",e=0;e<this.subjects.length;e++)t+=this.subjects[e].inspect();return t+">"}},Animator.applyDefaults=function(t,e){e=e||{};var a,n={};for(a in t)n[a]=void 0!==e[a]?e[a]:t[a];return n},Animator.makeArray=function(t){if(null==t)return[];if(!t.length)return[t];for(var e=[],a=0;a<t.length;a++)e[a]=t[a];return e},Animator.camelize=function(t){var e=t.split("-");if(1==e.length)return e[0];t=0==t.indexOf("-")?e[0].charAt(0).toUpperCase()+e[0].substring(1):e[0];for(var a=1,n=e.length;a<n;a++){var o=e[a];t+=o.charAt(0).toUpperCase()+o.substring(1)}return t},Animator.apply=function(t,e,a){return e instanceof Array?new Animator(a).addSubject(new CSSStyleSubject(t,e[0],e[1])):new Animator(a).addSubject(new CSSStyleSubject(t,e))},Animator.makeEaseIn=function(t){return function(e){return Math.pow(e,2*t)}},Animator.makeEaseOut=function(t){return function(e){return 1-Math.pow(1-e,2*t)}},Animator.makeElastic=function(t){return function(e){return e=Animator.tx.easeInOut(e),(1-Math.cos(e*Math.PI*t))*(1-e)+e}},Animator.makeADSR=function(t,e,a,n){return null==n&&(n=.5),function(o){return o<t?o/t:o<e?1-(o-t)/(e-t)*(1-n):o<a?n:n*(1-(o-a)/(1-a))}},Animator.makeBounce=function(t){var e=Animator.makeElastic(t);return function(t){return 1>=(t=e(t))?t:2-t}},Animator.tx={easeInOut:function(t){return-Math.cos(t*Math.PI)/2+.5},linear:function(t){return t},easeIn:Animator.makeEaseIn(1.5),easeOut:Animator.makeEaseOut(1.5),strongEaseIn:Animator.makeEaseIn(2.5),strongEaseOut:Animator.makeEaseOut(2.5),elastic:Animator.makeElastic(1),veryElastic:Animator.makeElastic(3),bouncy:Animator.makeBounce(1),veryBouncy:Animator.makeBounce(3)},NumericalStyleSubject.prototype={setState:function(t){t=this.getStyle(t);for(var e=(this.property,0),a=0;a<this.els.length;a++){try{this.els[a].style[this.property]=t}catch(t){if("fontWeight"!=this.property)throw t}if(20<e++)break}},getStyle:function(t){return t=this.from+(this.to-this.from)*t,"filter"==this.property?"alpha(opacity="+Math.round(100*t)+")":"opacity"==this.property?t:Math.round(t)+this.units},inspect:function(){return"\t"+this.property+"("+this.from+this.units+" to "+this.to+this.units+")\n"}},ColorStyleSubject.prototype={expandColor:function(t){var e;if(e=ColorStyleSubject.parseColor(t))return[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16)];window.DEBUG&&alert("Invalid colour: '"+t+"'")},getValueForState:function(t,e){return Math.round(this.from[t]+(this.to[t]-this.from[t])*e)},setState:function(t){t="#"+ColorStyleSubject.toColorPart(this.getValueForState(0,t))+ColorStyleSubject.toColorPart(this.getValueForState(1,t))+ColorStyleSubject.toColorPart(this.getValueForState(2,t));for(var e=0;e<this.els.length;e++)this.els[e].style[this.property]=t},inspect:function(){return"\t"+this.property+"("+this.origFrom+" to "+this.origTo+")\n"}},ColorStyleSubject.parseColor=function(t){var e,a="#";if(e=ColorStyleSubject.parseColor.rgbRe.exec(t)){for(var n=1;3>=n;n++)t=Math.max(0,Math.min(255,parseInt(e[n]))),a+=ColorStyleSubject.toColorPart(t);return a}if(e=ColorStyleSubject.parseColor.hexRe.exec(t)){if(3==e[1].length){for(n=0;3>n;n++)a+=e[1].charAt(n)+e[1].charAt(n);return a}return"#"+e[1]}return!1},ColorStyleSubject.toColorPart=function(t){255<t&&(t=255);var e=t.toString(16);return 16>t?"0"+e:e},ColorStyleSubject.parseColor.rgbRe=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i,ColorStyleSubject.parseColor.hexRe=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,DiscreteStyleSubject.prototype={setState:function(t){for(var e=0;e<this.els.length;e++)this.els[e].style[this.property]=t<=this.threshold?this.from:this.to},inspect:function(){return"\t"+this.property+"("+this.from+" to "+this.to+" @ "+this.threshold+")\n"}},CSSStyleSubject.prototype={parseStyle:function(t,e){var a={};if(-1!=t.indexOf(":"))for(var n=t.split(";"),o=0;o<n.length;o++){var i=CSSStyleSubject.ruleRe.exec(n[o]);i&&(a[i[1]]=i[2])}else{var s=e.className;for(e.className=t,o=0;o<CSSStyleSubject.cssProperties.length;o++)n=CSSStyleSubject.cssProperties[o],null!=(i=CSSStyleSubject.getStyle(e,n))&&(a[n]=i);e.className=s}return a},setState:function(t){for(var e=0;e<this.subjects.length;e++)this.subjects[e].setState(t)},inspect:function(){for(var t="",e=0;e<this.subjects.length;e++)t+=this.subjects[e].inspect();return t}},CSSStyleSubject.getStyle=function(t,e){var a;return document.defaultView&&document.defaultView.getComputedStyle&&(a=document.defaultView.getComputedStyle(t,"").getPropertyValue(e))?a:(e=Animator.camelize(e),t.currentStyle&&(a=t.currentStyle[e]),a||t.style[e])},CSSStyleSubject.ruleRe=/^\s*([a-zA-Z\-]+)\s*:\s*(\S(.+\S)?)\s*$/,CSSStyleSubject.numericalRe=/^-?\d+(?:\.\d+)?(%|[a-zA-Z]{2})?$/,CSSStyleSubject.discreteRe=/^\w+$/,CSSStyleSubject.cssProperties="azimuth background background-attachment background-color background-image background-position background-repeat border-collapse border-color border-spacing border-style border-top border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width border-bottom-width border-left-width border-width bottom clear clip color content cursor direction display elevation empty-cells css-float font font-family font-size font-size-adjust font-stretch font-style font-variant font-weight height left letter-spacing line-height list-style list-style-image list-style-position list-style-type margin margin-top margin-right margin-bottom margin-left max-height max-width min-height min-width orphans outline outline-color outline-style outline-width overflow padding padding-top padding-right padding-bottom padding-left pause position right size table-layout text-align text-decoration text-indent text-shadow text-transform top vertical-align visibility white-space width word-spacing z-index opacity outline-offset overflow-x overflow-y".split(" "),AnimatorChain.prototype={setOptions:function(t){this.options=Animator.applyDefaults({resetOnPlay:!0},t)},play:function(){if(this.forwards=!0,this.current=-1,this.options.resetOnPlay)for(var t=0;t<this.animators.length;t++)this.animators[t].jumpTo(0);this.advance()},reverse:function(){if(this.forwards=!1,this.current=this.animators.length,this.options.resetOnPlay)for(var t=0;t<this.animators.length;t++)this.animators[t].jumpTo(1);this.advance()},toggle:function(){this.forwards?this.seekTo(0):this.seekTo(1)},listenTo:function(t){var e=t.options.onComplete,a=this;t.options.onComplete=function(){e&&e.call(t),a.advance()}},advance:function(){this.forwards?null!=this.animators[this.current+1]&&(this.current++,this.animators[this.current].play()):null!=this.animators[this.current-1]&&(this.current--,this.animators[this.current].reverse())},seekTo:function(t){0>=t?(this.forwards=!1,this.animators[this.current].seekTo(0)):(this.forwards=!0,this.animators[this.current].seekTo(1))}},Accordion.prototype={setOptions:function(t){this.options=Object.extend({sections:null,getActivator:function(t){return document.getElementById(t.getAttribute("activator"))},shift:0,initialSection:0,rememberance:!0,animatorOptions:{}},t||{})},show:function(t){for(var e=0;e<this.ans.length;e++)this.ans[e].seekTo(e>t?1:0);this.options.rememberance&&(document.location.hash=this.rememberanceTexts[t])}},function(t){function e(){var e=this,a=this,n=soundManager,o=navigator.userAgent,i=o.match(/msie/i),s=o.match(/opera/i),r=o.match(/safari/i),l=o.match(/chrome/i),u=o.match(/ipad|iphone/i),d=void 0===t.G_vmlCanvasManager&&void 0!==document.createElement("canvas").getContext("2d"),c=s||l?359.9:360,h=navigator.userAgent.match(/msie [678]/i)?1:2;this.excludeClass="threesixty-exclude",this.links=[],this.sounds=[],this.soundsByURL=[],this.indexByURL=[],this.lastTouchedSound=this.lastSound=null,this.soundCount=0,this.vuMeter=this.oUIImageMap=this.oUITemplate=null,this.callbackCount=0,this.peakDataHistory=[],this.config={playNext:!1,autoPlay:!1,allowMultiple:!1,loadRingColor:"#ccc",playRingColor:"#000",backgroundRingColor:"#eee",segmentRingColor:"rgba(255,255,255,0.33)",segmentRingColorAlt:"rgba(0,0,0,0.1)",loadRingColorMetadata:"#ddd",playRingColorMetadata:"rgba(128,192,256,0.9)",circleDiameter:null,circleRadius:null,animDuration:500,animTransition:t.Animator.tx.bouncy,showHMSTime:!1,scaleFont:!0,useWaveformData:!1,waveformDataColor:"#0099ff",waveformDataDownsample:3,waveformDataOutside:!1,waveformDataConstrain:!1,waveformDataLineRatio:.64,useEQData:!1,eqDataColor:"#339933",eqDataDownsample:4,eqDataOutside:!0,eqDataLineRatio:.54,usePeakData:!0,peakDataColor:"#ff33ff",peakDataOutside:!0,peakDataLineRatio:.5,useAmplifier:!0,fontSizeMax:null,scaleArcWidth:1,useFavIcon:!1},this.css={sDefault:"sm2_link",sBuffering:"sm2_buffering",sPlaying:"sm2_playing",sPaused:"sm2_paused"},this.addEventHandler=void 0!==t.addEventListener?function(t,e,a){return t.addEventListener(e,a,!1)}:function(t,e,a){t.attachEvent("on"+e,a)},this.removeEventHandler=void 0!==t.removeEventListener?function(t,e,a){return t.removeEventListener(e,a,!1)}:function(t,e,a){return t.detachEvent("on"+e,a)},this.hasClass=function(t,e){return void 0!==t.className&&t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},this.addClass=function(t,a){t&&a&&!e.hasClass(t,a)&&(t.className=(t.className?t.className+" ":"")+a)},this.removeClass=function(t,a){t&&a&&e.hasClass(t,a)&&(t.className=t.className.replace(new RegExp("( "+a+")|("+a+")","g"),""))},this.getElementsByClassName=function(t,a,n){var o=n||document,i=[],s=[];if(void 0!==a&&"string"!=typeof a)for(n=a.length;n--;)s&&s[a[n]]||(s[a[n]]=o.getElementsByTagName(a[n]));else s=a?o.getElementsByTagName(a):o.all||o.getElementsByTagName("*");if("string"!=typeof a)for(n=a.length;n--;)for(o=s[a[n]].length;o--;)e.hasClass(s[a[n]][o],t)&&i.push(s[a[n]][o]);else for(n=0;n<s.length;n++)e.hasClass(s[n],t)&&i.push(s[n]);return i},this.getParentByNodeName=function(t,e){if(!t||!e)return!1;for(e=e.toLowerCase();t.parentNode&&e!==t.parentNode.nodeName.toLowerCase();)t=t.parentNode;return t.parentNode&&e===t.parentNode.nodeName.toLowerCase()?t.parentNode:null},this.getParentByClassName=function(t,a){if(!t||!a)return null;for(;t.parentNode&&!e.hasClass(t.parentNode,a);)t=t.parentNode;return t.parentNode&&e.hasClass(t.parentNode,a)?t.parentNode:null},this.getSoundByURL=function(t){return void 0!==e.soundsByURL[t]?e.soundsByURL[t]:null},this.isChildOfNode=function(t,e){if(!t||!t.parentNode)return!1;e=e.toLowerCase();do{t=t.parentNode}while(t&&t.parentNode&&t.nodeName.toLowerCase()!==e);return t&&t.nodeName.toLowerCase()===e?t:null},this.isChildOfClass=function(t,a){if(!t||!a)return!1;for(;t.parentNode&&!e.hasClass(t,a);)t=e.findParent(t);return e.hasClass(t,a)},this.findParent=function(t){if(!t||!t.parentNode)return!1;if(2===(t=t.parentNode).nodeType)for(;t&&t.parentNode&&2===t.parentNode.nodeType;)t=t.parentNode;return t},this.getStyle=function(e,a){try{if(e.currentStyle)return e.currentStyle[a];if(t.getComputedStyle)return document.defaultView.getComputedStyle(e,null).getPropertyValue(a)}catch(t){}return null},this.findXY=function(t){var e=0,a=0;do{e+=t.offsetLeft,a+=t.offsetTop}while(t=t.offsetParent);return[e,a]},this.getMouseXY=function(a){return a=a||t.event,u&&a.touches&&(a=a.touches[0]),a.pageX||a.pageY?[a.pageX,a.pageY]:a.clientX||a.clientY?[a.clientX+e.getScrollLeft(),a.clientY+e.getScrollTop()]:[void 0,void 0]},this.getScrollLeft=function(){return document.body.scrollLeft+document.documentElement.scrollLeft},this.getScrollTop=function(){return document.body.scrollTop+document.documentElement.scrollTop},this.events={play:function(){a.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=a.css.sPlaying,a.addClass(this._360data.oUIBox,this._360data.className),e.fanOut(this)},stop:function(){a.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className="",e.fanIn(this)},pause:function(){a.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=a.css.sPaused,a.addClass(this._360data.oUIBox,this._360data.className)},resume:function(){a.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=a.css.sPlaying,a.addClass(this._360data.oUIBox,this._360data.className)},finish:function(){var t;a.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className="",this._360data.didFinish=!0,e.fanIn(this),a.config.playNext&&(t=a.indexByURL[this._360data.oLink.href]+1)<a.links.length&&a.handleClick({target:a.links[t]})},whileloading:function(){this.paused&&e.updatePlaying.apply(this)},whileplaying:function(){e.updatePlaying.apply(this),this._360data.fps++},bufferchange:function(){this.isBuffering?a.addClass(this._360data.oUIBox,a.css.sBuffering):a.removeClass(this._360data.oUIBox,a.css.sBuffering)}},this.stopEvent=function(e){return void 0!==e&&void 0!==e.preventDefault?e.preventDefault():void 0!==t.event&&void 0!==t.event.returnValue&&(t.event.returnValue=!1),!1},this.getTheDamnLink=i?function(e){return e&&e.target?e.target:t.event.srcElement}:function(t){return t.target},this.handleClick=function(a){if(1<a.button)return!0;var o,i,s,r,l,u,d=e.getTheDamnLink(a);return"a"!==d.nodeName.toLowerCase()&&!(d=e.isChildOfNode(d,"a"))||!e.isChildOfClass(d,"ui360")||!(d.href&&n.canPlayLink(d)&&!e.hasClass(d,e.excludeClass))||(n._writeDebug("handleClick()"),i=d.href,(s=e.getSoundByURL(i))?s===e.lastSound?s.togglePause():(s.togglePause(),n._writeDebug("sound different than last sound: "+e.lastSound.id),!e.config.allowMultiple&&e.lastSound&&e.stopSound(e.lastSound)):(r=d.parentNode,l=e.getElementsByClassName("ui360-vis","div",r.parentNode).length,s=n.createSound({id:"ui360Sound"+e.soundCount++,url:i,onplay:e.events.play,onstop:e.events.stop,onpause:e.events.pause,onresume:e.events.resume,onfinish:e.events.finish,onbufferchange:e.events.bufferchange,type:d.type||null,whileloading:e.events.whileloading,whileplaying:e.events.whileplaying,useWaveformData:l&&e.config.useWaveformData,useEQData:l&&e.config.useEQData,usePeakData:l&&e.config.usePeakData}),u=parseInt(e.getElementsByClassName("sm2-360ui","div",r)[0].offsetWidth*h,10),o=e.getElementsByClassName("sm2-canvas","canvas",r),s._360data={oUI360:e.getParentByClassName(d,"ui360"),oLink:d,className:e.css.sPlaying,oUIBox:e.getElementsByClassName("sm2-360ui","div",r)[0],oCanvas:o[o.length-1],oButton:e.getElementsByClassName("sm2-360btn","span",r)[0],oTiming:e.getElementsByClassName("sm2-timing","div",r)[0],oCover:e.getElementsByClassName("sm2-cover","div",r)[0],circleDiameter:u,circleRadius:u/2,lastTime:null,didFinish:null,pauseCount:0,radius:0,fontSize:1,fontSizeMax:e.config.fontSizeMax,scaleFont:l&&e.config.scaleFont,showHMSTime:l,amplifier:l&&e.config.usePeakData?.9:1,radiusMax:.175*u,width:0,widthMax:.4*u,lastValues:{bytesLoaded:0,bytesTotal:0,position:0,durationEstimate:0},animating:!1,oAnim:new t.Animator({duration:e.config.animDuration,transition:e.config.animTransition,onComplete:function(){}}),oAnimProgress:function(t){this._360data.radius=parseInt(this._360data.radiusMax*this._360data.amplifier*t,10),this._360data.width=parseInt(this._360data.widthMax*this._360data.amplifier*t,10),this._360data.scaleFont&&null!==this._360data.fontSizeMax&&(this._360data.oTiming.style.fontSize=parseInt(Math.max(1,this._360data.fontSizeMax*t),10)+"px",this._360data.oTiming.style.opacity=t),(this.paused||0===this.playState||0===this._360data.lastValues.bytesLoaded||0===this._360data.lastValues.position)&&e.updatePlaying.apply(this)},fps:0},void 0!==e.Metadata&&e.getElementsByClassName("metadata","div",s._360data.oUI360).length&&(s._360data.metadata=new e.Metadata(s,e)),s._360data.scaleFont&&null!==s._360data.fontSizeMax&&(s._360data.oTiming.style.fontSize="1px"),s._360data.oAnim.addSubject(s._360data.oAnimProgress,s),e.refreshCoords(s),e.updatePlaying.apply(s),e.soundsByURL[i]=s,e.sounds.push(s),!e.config.allowMultiple&&e.lastSound&&e.stopSound(e.lastSound),s.play()),e.lastSound=s,void 0!==a&&void 0!==a.preventDefault?a.preventDefault():void 0!==t.event&&(t.event.returnValue=!1),!1)},this.fanOut=function(a){1!==a._360data.animating&&(a._360data.animating=0,soundManager._writeDebug("fanOut: "+a.id+": "+a._360data.oLink.href),a._360data.oAnim.seekTo(1),t.setTimeout(function(){a._360data.animating=0},e.config.animDuration+20))},this.fanIn=function(a){-1!==a._360data.animating&&(a._360data.animating=-1,soundManager._writeDebug("fanIn: "+a.id+": "+a._360data.oLink.href),a._360data.oAnim.seekTo(0),t.setTimeout(function(){a._360data.didFinish=!1,a._360data.animating=0,e.resetLastValues(a)},e.config.animDuration+20))},this.resetLastValues=function(t){t._360data.lastValues.position=0},this.refreshCoords=function(t){t._360data.canvasXY=e.findXY(t._360data.oCanvas),t._360data.canvasMid=[t._360data.circleRadius,t._360data.circleRadius],t._360data.canvasMidXY=[t._360data.canvasXY[0]+t._360data.canvasMid[0],t._360data.canvasXY[1]+t._360data.canvasMid[1]]},this.stopSound=function(t){soundManager._writeDebug("stopSound: "+t.id),soundManager.stop(t.id),u||soundManager.unload(t.id)},this.buttonClick=function(a){return e.handleClick({target:e.getParentByClassName(a?a.target?a.target:a.srcElement:t.event.srcElement,"sm2-360ui").nextSibling}),!1},this.buttonMouseDown=function(t){return u?e.addEventHandler(document,"touchmove",e.mouseDown):document.onmousemove=function(t){e.mouseDown(t)},e.stopEvent(t),!1},this.mouseDown=function(a){if(!u&&1<a.button)return!0;if(!e.lastSound)return e.stopEvent(a),!1;var n,o,i,s=a||t.event;return u&&s.touches&&(s=s.touches[0]),n=s.target||s.srcElement,o=e.getSoundByURL(e.getElementsByClassName("sm2_link","a",e.getParentByClassName(n,"ui360"))[0].href),e.lastTouchedSound=o,e.refreshCoords(o),i=o._360data,e.addClass(i.oUIBox,"sm2_dragging"),i.pauseCount=e.lastTouchedSound.paused?1:0,e.mmh(a||t.event),u?(e.removeEventHandler(document,"touchmove",e.mouseDown),e.addEventHandler(document,"touchmove",e.mmh),e.addEventHandler(document,"touchend",e.mouseUp)):(document.onmousemove=e.mmh,document.onmouseup=e.mouseUp),e.stopEvent(a),!1},this.mouseUp=function(){var t=e.lastTouchedSound._360data;e.removeClass(t.oUIBox,"sm2_dragging"),0===t.pauseCount&&e.lastTouchedSound.resume(),u?(e.removeEventHandler(document,"touchmove",e.mmh),e.removeEventHandler(document,"touchend",e.mouseUP)):(document.onmousemove=null,document.onmouseup=null)},this.mmh=function(a){void 0===a&&(a=t.event);var n=e.lastTouchedSound,o=e.getMouseXY(a);return o=Math.floor(c-(e.rad2deg(Math.atan2(o[0]-n._360data.canvasMidXY[0],o[1]-n._360data.canvasMidXY[1]))+180)),n.setPosition(o/c*n.durationEstimate),e.stopEvent(a),!1},this.drawSolidArc=function(t,a,n,o,i,l,u){var d,c,h,f=t;f.getContext&&(d=f.getContext("2d")),t=d,u||e.clearCanvas(f),a&&(d.fillStyle=a),t.beginPath(),isNaN(i)&&(i=0),a=n-o,(!(c=s||r)||c&&0<n)&&(t.arc(0,0,n,l,i,!1),h=e.getArcEndpointCoords(a,i),t.lineTo(h.x,h.y),t.arc(0,0,a,i,l,!0),t.closePath(),t.fill())},this.getArcEndpointCoords=function(t,e){return{x:t*Math.cos(e),y:t*Math.sin(e)}},this.deg2rad=function(t){return Math.PI/180*t},this.rad2deg=function(t){return 180/Math.PI*t},this.getTime=function(t,e){var a=Math.floor(t/1e3),n=Math.floor(a/60);return a-=60*n,e?n+":"+(10>a?"0"+a:a):{min:n,sec:a}},this.clearCanvas=function(t){var e,a,n=null;t.getContext&&(n=t.getContext("2d")),n&&(e=t.offsetWidth,a=t.offsetHeight,n.clearRect(-e/2,-a/2,e,a))},this.updatePlaying=function(){var t=this._360data.showHMSTime?e.getTime(this.position,!0):parseInt(this.position/1e3,10),a=e.config.scaleArcWidth;this.bytesLoaded&&(this._360data.lastValues.bytesLoaded=this.bytesLoaded,this._360data.lastValues.bytesTotal=this.bytesTotal),this.position&&(this._360data.lastValues.position=this.position),this.durationEstimate&&(this._360data.lastValues.durationEstimate=this.durationEstimate),e.drawSolidArc(this._360data.oCanvas,e.config.backgroundRingColor,this._360data.width,this._360data.radius*a,e.deg2rad(c),!1),e.drawSolidArc(this._360data.oCanvas,this._360data.metadata?e.config.loadRingColorMetadata:e.config.loadRingColor,this._360data.width,this._360data.radius*a,e.deg2rad(this._360data.lastValues.bytesLoaded/this._360data.lastValues.bytesTotal*c),0,!0),0!==this._360data.lastValues.position&&e.drawSolidArc(this._360data.oCanvas,this._360data.metadata?e.config.playRingColorMetadata:e.config.playRingColor,this._360data.width,this._360data.radius*a,e.deg2rad(1===this._360data.didFinish?c:this._360data.lastValues.position/this._360data.lastValues.durationEstimate*c),0,!0),this._360data.metadata&&this._360data.metadata.events.whileplaying(),t!==this._360data.lastTime&&(this._360data.lastTime=t,this._360data.oTiming.innerHTML=t),(this.instanceOptions.useWaveformData||this.instanceOptions.useEQData)&&d&&e.updateWaveform(this),e.config.useFavIcon&&e.vuMeter&&e.vuMeter.updateVU(this)},this.updateWaveform=function(t){if((e.config.useWaveformData||e.config.useEQData)&&(n.features.waveformData||n.features.eqData)&&(t.waveformData.left.length||t.eqData.length||t.peakData.left)){var a,o;if(parseInt(t._360data.circleDiameter/2,10),e.config.useWaveformData){var i=e.config.waveformDataDownsample,s=256/(i=Math.max(1,i)),r=null,l=e.config.waveformDataOutside?1:e.config.waveformDataConstrain?.5:.565,u=e.config.waveformDataOutside?.7:.75,d=e.deg2rad(360/s*e.config.waveformDataLineRatio);for(a=0;256>a;a+=i){var c=(o=e.deg2rad(a/s*(1/i)*360))+d;0>(r=t.waveformData.left[a])&&e.config.waveformDataConstrain&&(r=Math.abs(r)),e.drawSolidArc(t._360data.oCanvas,e.config.waveformDataColor,t._360data.width*l*(2-e.config.scaleArcWidth),t._360data.radius*u*1.25*r,c,o,!0)}}if(e.config.useEQData){i=e.config.eqDataDownsample,s=(r=192)/(i=Math.max(1,i)),l=e.config.eqDataOutside?1:.565;var h=e.config.eqDataOutside?-1:1;for(u=e.config.eqDataOutside?.5:.75,d=e.deg2rad(360/s*e.config.eqDataLineRatio),s=e.deg2rad(1===t._360data.didFinish?360:t._360data.lastValues.position/t._360data.lastValues.durationEstimate*360),a=0;a<r;a+=i)c=(o=e.deg2rad(a/r*360))+d,e.drawSolidArc(t._360data.oCanvas,c>s?e.config.eqDataColor:e.config.playRingColor,t._360data.width*l,t._360data.radius*u*t.eqData.left[a]*h,c,o,!0)}if(e.config.usePeakData&&!t._360data.animating){for(i=t.peakData.left||t.peakData.right,r=3,a=0;a<r;a++)i=i||t.eqData[a];t._360data.amplifier=e.config.useAmplifier?.9+.1*i:1,t._360data.radiusMax=.175*t._360data.circleDiameter*t._360data.amplifier,t._360data.widthMax=.4*t._360data.circleDiameter*t._360data.amplifier,t._360data.radius=parseInt(t._360data.radiusMax*t._360data.amplifier,10),t._360data.width=parseInt(t._360data.widthMax*t._360data.amplifier,10)}}},this.getUIHTML=function(t){return['<canvas class="sm2-canvas" width="'+t+'" height="'+t+'"></canvas>',' <span class="sm2-360btn sm2-360btn-default"></span>',' <div class="sm2-timing'+(navigator.userAgent.match(/safari/i)?" alignTweak":"")+'"></div>',' <div class="sm2-cover"></div>']},this.uiTest=function(t){var a,n,o,i,s,r,l,u,d,c=document.createElement("div");return c.className="sm2-360ui",(a=document.createElement("div")).className="ui360"+(t?" "+t:""),n=a.appendChild(c.cloneNode(!0)),a.style.position="absolute",a.style.left="-9999px",o=document.body.appendChild(a),i=n.offsetWidth*h,s=e.getUIHTML(i),n.innerHTML=s[1]+s[2]+s[3],r=parseInt(i,10),l=parseInt(r/2,10),d=e.getElementsByClassName("sm2-timing","div",o)[0],u=parseInt(e.getStyle(d,"font-size"),10),isNaN(u)&&(u=null),a.parentNode.removeChild(a),{circleDiameter:r,circleRadius:l,fontSizeMax:u}},this.init=function(){var a,o,s,r,l,d,c,f,p,m,g;n._writeDebug("threeSixtyPlayer.init()");var y=e.getElementsByClassName("ui360","div"),_=[],v=!1,w=0,b=0;for(a=y.length;b<a;b++)_.push(y[b].getElementsByTagName("a")[0]),y[b].style.backgroundImage="none";e.oUITemplate=document.createElement("div"),e.oUITemplate.className="sm2-360ui",e.oUITemplateVis=document.createElement("div"),e.oUITemplateVis.className="sm2-360ui",y=e.uiTest(),e.config.circleDiameter=y.circleDiameter,e.config.circleRadius=y.circleRadius;var S=e.uiTest("ui360-vis");for(e.config.fontSizeMax=S.fontSizeMax,e.oUITemplate.innerHTML=e.getUIHTML(e.config.circleDiameter).join(""),e.oUITemplateVis.innerHTML=e.getUIHTML(S.circleDiameter).join(""),b=0,a=_.length;b<a;b++)!n.canPlayLink(_[b])||e.hasClass(_[b],e.excludeClass)||e.hasClass(_[b],e.css.sDefault)||(e.addClass(_[b],e.css.sDefault),e.links[w]=_[b],e.indexByURL[_[b].href]=w,w++,d=((v=e.hasClass(_[b].parentNode,"ui360-vis"))?S:y).circleDiameter,c=(v?S:y).circleRadius,f=_[b].parentNode.insertBefore((v?e.oUITemplateVis:e.oUITemplate).cloneNode(!0),_[b]),i&&void 0!==t.G_vmlCanvasManager?((m=document.createElement("canvas")).className="sm2-canvas",g="sm2_canvas_"+b+(new Date).getTime(),m.id=g,m.width=d,m.height=d,f.appendChild(m),t.G_vmlCanvasManager.initElement(m),1<(o=(s=document.getElementById(g)).parentNode.getElementsByTagName("canvas")).length&&(s=o[o.length-1])):s=_[b].parentNode.getElementsByTagName("canvas")[0],1<h&&e.addClass(s,"hi-dpi"),l=e.getElementsByClassName("sm2-cover","div",_[b].parentNode)[0],p=_[b].parentNode.getElementsByTagName("span")[0],e.addEventHandler(p,"click",e.buttonClick),u?e.addEventHandler(l,"touchstart",e.mouseDown):e.addEventHandler(l,"mousedown",e.mouseDown),(r=s.getContext("2d")).translate(c,c),r.rotate(e.deg2rad(-90)));0<w&&(e.addEventHandler(document,"click",e.handleClick),e.config.autoPlay&&e.handleClick({target:e.links[0],preventDefault:function(){}})),n._writeDebug("threeSixtyPlayer.init(): Found "+w+" relevant items."),e.config.useFavIcon&&void 0!==this.VUMeter&&(this.vuMeter=new this.VUMeter(this))}}e.prototype.VUMeter=function(t){var e=this,a=document.getElementsByTagName("head")[0],n=navigator.userAgent.match(/opera/i),o=navigator.userAgent.match(/firefox/i);this.vuMeterData=[],this.vuDataCanvas=null,this.setPageIcon=function(e){if(t.config.useFavIcon&&t.config.usePeakData&&e){var n=document.getElementById("sm2-favicon");n&&(a.removeChild(n),n=null),n||((n=document.createElement("link")).id="sm2-favicon",n.rel="shortcut icon",n.type="image/png",n.href=e,document.getElementsByTagName("head")[0].appendChild(n))}},this.resetPageIcon=function(){if(t.config.useFavIcon){var e=document.getElementById("favicon");e&&(e.href="/favicon.ico")}},this.updateVU=function(a){9<=soundManager.flashVersion&&t.config.useFavIcon&&t.config.usePeakData&&e.setPageIcon(e.vuMeterData[parseInt(16*a.peakData.left,10)][parseInt(16*a.peakData.right,10)])},this.createVUData=function(){var t,a,n=e.vuDataCanvas.getContext("2d"),o=n.createLinearGradient(0,16,0,0),i=n.createLinearGradient(0,16,0,0);for(o.addColorStop(0,"rgb(0,192,0)"),o.addColorStop(.3,"rgb(0,255,0)"),o.addColorStop(.625,"rgb(255,255,0)"),o.addColorStop(.85,"rgb(255,0,0)"),i.addColorStop(0,"rgba(0,0,0,0.2)"),i.addColorStop(1,"rgba(0,0,0,0.5)"),t=0;16>t;t++)e.vuMeterData[t]=[];for(t=0;16>t;t++)for(a=0;16>a;a++)e.vuDataCanvas.setAttribute("width",16),e.vuDataCanvas.setAttribute("height",16),n.fillStyle=i,n.fillRect(0,0,7,15),n.fillRect(8,0,7,15),n.fillStyle=o,n.fillRect(0,15-t,7,16-(16-t)),n.fillRect(8,15-a,7,16-(16-a)),n.clearRect(0,3,16,1),n.clearRect(0,7,16,1),n.clearRect(0,11,16,1),e.vuMeterData[t][a]=e.vuDataCanvas.toDataURL("image/png")},this.testCanvas=function(){var t=document.createElement("canvas");if(!t||void 0===t.getContext||!t.getContext("2d")||"function"!=typeof t.toDataURL)return null;try{t.toDataURL("image/png")}catch(t){return null}return t},this.init=function(){t.config.useFavIcon&&(e.vuDataCanvas=e.testCanvas(),e.vuDataCanvas&&(o||n)?e.createVUData():t.config.useFavIcon=!1)},this.init()},e.prototype.Metadata=function(t,e){soundManager._wD("Metadata()");var a,n=this,o=t._360data.oUI360,i=o.getElementsByTagName("ul")[0].getElementsByTagName("li");for(this.lastWPExec=0,this.refreshInterval=250,this.totalTime=0,this.events={whileplaying:function(){var o,i,s=t._360data.width,r=t._360data.radius,l=t.durationEstimate||1e3*n.totalTime,u=0;for(o=n.data.length;u<o;u++){var d=0==u%2;e.drawSolidArc(t._360data.oCanvas,d?e.config.segmentRingColorAlt:e.config.segmentRingColor,s,r/2,e.deg2rad(n.data[a].endTimeMS/l*360),e.deg2rad((n.data[a].startTimeMS||1)/l*360),!0)}(i=new Date)-n.lastWPExec>n.refreshInterval&&(n.refresh(),n.lastWPExec=i)}},this.refresh=function(){var e,a=null,n=t.position,o=t._360data.metadata.data,i=0;for(e=o.length;i<e;i++)if(n>=o[i].startTimeMS&&n<=o[i].endTimeMS){a=i;break}a!==o.currentItem&&a<o.length&&(t._360data.oLink.innerHTML=o.mainTitle+' <span class="metadata"><span class="sm2_divider"> | </span><span class="sm2_metadata">'+o[a].title+"</span></span>",o.currentItem=a)},this.strToTime=function(t){var e=t.split(":"),a=0;for(t=e.length;t--;)a+=parseInt(e[t],10)*Math.pow(60,e.length-1-t);return a},this.data=[],this.data.givenDuration=null,this.data.currentItem=null,this.data.mainTitle=t._360data.oLink.innerHTML,a=0;a<i.length;a++)this.data[a]={o:null,title:i[a].getElementsByTagName("p")[0].innerHTML,startTime:i[a].getElementsByTagName("span")[0].innerHTML,startSeconds:n.strToTime(i[a].getElementsByTagName("span")[0].innerHTML.replace(/[()]/g,"")),duration:0,durationMS:null,startTimeMS:null,endTimeMS:null,oNote:null};for(o=e.getElementsByClassName("duration","div",o),this.data.givenDuration=o.length?1e3*n.strToTime(o[0].innerHTML):0,a=0;a<this.data.length;a++)this.data[a].duration=parseInt(this.data[a+1]?this.data[a+1].startSeconds:(n.data.givenDuration?n.data.givenDuration:t.durationEstimate)/1e3,10)-this.data[a].startSeconds,this.data[a].startTimeMS=1e3*this.data[a].startSeconds,this.data[a].durationMS=1e3*this.data[a].duration,this.data[a].endTimeMS=this.data[a].startTimeMS+this.data[a].durationMS,this.totalTime+=this.data[a].duration},navigator.userAgent.match(/webkit/i)&&navigator.userAgent.match(/mobile/i)&&soundManager.setup({useHTML5Audio:!0}),soundManager.setup({html5PollingInterval:50,debugMode:t.location.href.match(/debug=1/i),consoleOnly:!0,flashVersion:9,useHighPerformance:!0}),soundManager.debugMode&&t.setInterval(function(){var e=t.threeSixtyPlayer;e&&e.lastSound&&e.lastSound._360data.fps&&void 0===t.isHome&&(soundManager._writeDebug("fps: ~"+e.lastSound._360data.fps),e.lastSound._360data.fps=0)},1e3),t.ThreeSixtyPlayer=e,t.threeSixtyPlayer=new e}(window),soundManager.onready(threeSixtyPlayer.init);